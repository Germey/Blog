<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
  <meta name="theme-color" content="#222">
  <meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#222">
  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>
  <script id="hexo-configurations">
    var NexT = window.NexT ||
    {};
    var CONFIG = {
      "hostname": "cuiqingcai.com",
      "root": "/",
      "scheme": "Pisces",
      "version": "7.8.0",
      "exturl": false,
      "sidebar":
      {
        "position": "right",
        "width": 360,
        "display": "post",
        "padding": 18,
        "offset": 12,
        "onmobile": false,
        "widgets": [
          {
            "type": "image",
            "name": "阿布云",
            "enable": false,
            "url": "https://www.abuyun.com/http-proxy/introduce.html",
            "src": "https://cdn.cuiqingcai.com/88au8.jpg",
            "width": "100%"
      },
          {
            "type": "image",
            "name": "爬虫书",
            "url": "https://item.jd.com/13527222.html",
            "src": "https://cdn.cuiqingcai.com/ei5og.jpg",
            "width": "100%",
            "enable": true
      },
          {
            "type": "categories",
            "name": "分类",
            "enable": true
      },
          {
            "type": "image",
            "name": "IPIDEA",
            "url": "http://www.ipidea.net/?utm-source=cqc&utm-keyword=?cqc",
            "src": "https://cdn.cuiqingcai.com/0ywun.png",
            "width": "100%",
            "enable": false
      },
          {
            "type": "image",
            "name": "Storm Proxies",
            "src": "https://cdn.cuiqingcai.com/a2zad8.png",
            "url": "https://www.stormproxies.cn/?keyword=jingmi",
            "width": "100%",
            "enable": false
      },
          {
            "type": "friends",
            "name": "友情链接",
            "enable": true
      },
          {
            "type": "hot",
            "name": "猜你喜欢",
            "enable": true
      },
          {
            "type": "tags",
            "name": "标签云",
            "enable": true
      }]
      },
      "copycode":
      {
        "enable": true,
        "show_result": true,
        "style": "mac"
      },
      "back2top":
      {
        "enable": true,
        "sidebar": false,
        "scrollpercent": true
      },
      "bookmark":
      {
        "enable": false,
        "color": "#222",
        "save": "auto"
      },
      "fancybox": false,
      "mediumzoom": false,
      "lazyload": false,
      "pangu": true,
      "comments":
      {
        "style": "tabs",
        "active": "gitalk",
        "storage": true,
        "lazyload": false,
        "nav": null,
        "activeClass": "gitalk"
      },
      "algolia":
      {
        "hits":
        {
          "per_page": 10
        },
        "labels":
        {
          "input_placeholder": "Search for Posts",
          "hits_empty": "We didn't find any results for the search: ${query}",
          "hits_stats": "${hits} results found in ${time} ms"
        }
      },
      "localsearch":
      {
        "enable": true,
        "trigger": "auto",
        "top_n_per_article": 10,
        "unescape": false,
        "preload": false
      },
      "motion":
      {
        "enable": false,
        "async": false,
        "transition":
        {
          "post_block": "bounceDownIn",
          "post_header": "slideDownIn",
          "post_body": "slideDownIn",
          "coll_header": "slideLeftIn",
          "sidebar": "slideUpIn"
        }
      },
      "path": "search.xml"
    };

  </script>
  <meta name="keywords" content="爬虫,网络爬虫,2022,Python 爬虫,JavaScript,混淆">
  <meta name="robots" content="index,follow">
  <meta name="GOOGLEBOT" content="index,follow">
  <meta name="author" content="静觅丨崔庆才的个人站点">
  <meta name="description" content="系列文章总目录：【2022 年】Python3 爬虫学习教程，本教程内容多数来自于《Python3 网络爬虫开发实战（第二版）》一书，目前截止 2022 年，可以将爬虫基本技术进行系统讲解，同时将最新前沿爬虫技术如异步、JavaScript 逆向、AST、安卓逆向、Hook、智能解析、群控技术、WebAssembly、大规模分布式、Docker、Kubernetes 等，市面上目前就仅有《P">
  <meta property="og:type" content="article">
  <meta property="og:title" content="【2022 年】Python3 爬虫教程 - JavaScript 网站加密和混淆技术简介">
  <meta property="og:url" content="https://cuiqingcai.com/2022111.html">
  <meta property="og:site_name" content="静觅">
  <meta property="og:description" content="系列文章总目录：【2022 年】Python3 爬虫学习教程，本教程内容多数来自于《Python3 网络爬虫开发实战（第二版）》一书，目前截止 2022 年，可以将爬虫基本技术进行系统讲解，同时将最新前沿爬虫技术如异步、JavaScript 逆向、AST、安卓逆向、Hook、智能解析、群控技术、WebAssembly、大规模分布式、Docker、Kubernetes 等，市面上目前就仅有《P">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:image" content="https://cdn.cuiqingcai.com/viunz.png">
  <meta property="article:published_time" content="2022-03-05T06:11:52.000Z">
  <meta property="article:modified_time" content="2025-08-11T15:24:05.300Z">
  <meta property="article:author" content="崔庆才">
  <meta property="article:tag" content="爬虫">
  <meta property="article:tag" content="网络爬虫">
  <meta property="article:tag" content="2022">
  <meta property="article:tag" content="Python 爬虫">
  <meta property="article:tag" content="JavaScript">
  <meta property="article:tag" content="混淆">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="https://cdn.cuiqingcai.com/viunz.png">
  <link rel="canonical" href="https://cuiqingcai.com/2022111.html">
  <script id="page-configurations">
    // https://hexo.io/docs/variables.html
    CONFIG.page = {
      sidebar: "",
      isHome: false,
      isPost: true,
      lang: 'zh-CN'
    };

  </script>
  <title>【2022 年】Python3 爬虫教程 - JavaScript 网站加密和混淆技术简介 | 静觅</title>
  <meta name="google-site-verification" content="p_bIcnvirkFzG2dYKuNDivKD8-STet5W7D-01woA2fc" />
  <meta name="sogou_site_verification" content="kBOV53NQqT" />
  <noscript>
    <style>
      .use-motion .brand,
      .use-motion .menu-item,
      .sidebar-inner,
      .use-motion .post-block,
      .use-motion .pagination,
      .use-motion .comments,
      .use-motion .post-header,
      .use-motion .post-body,
      .use-motion .collection-header
      {
        opacity: initial;
      }

      .use-motion .site-title,
      .use-motion .site-subtitle
      {
        opacity: initial;
        top: initial;
      }

      .use-motion .logo-line-before i
      {
        left: initial;
      }

      .use-motion .logo-line-after i
      {
        right: initial;
      }

    </style>
  </noscript>
  <link rel="alternate" href="/atom.xml" title="静觅" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner">
        <div class="site-brand-container">
          <div class="site-nav-toggle">
            <div class="toggle" aria-label="切换导航栏">
              <span class="toggle-line toggle-line-first"></span>
              <span class="toggle-line toggle-line-middle"></span>
              <span class="toggle-line toggle-line-last"></span>
            </div>
          </div>
          <div class="site-meta">
            <a href="/" class="brand" rel="start">
              <span class="logo-line-before"><i></i></span>
              <h1 class="site-title">静觅 <span class="site-subtitle"> 崔庆才的个人站点 - Python爬虫教程 </span>
              </h1>
              <span class="logo-line-after"><i></i></span>
            </a>
          </div>
          <div class="site-nav-right">
            <div class="toggle popup-trigger">
              <i class="fa fa-search fa-fw fa-lg"></i>
            </div>
          </div>
        </div>
        <nav class="site-nav">
          <ul id="menu" class="main-menu menu">
            <li class="menu-item menu-item-home">
              <a href="/" rel="section">首页</a>
            </li>
            <li class="menu-item menu-item-archives">
              <a href="/archives/" rel="section">文章列表</a>
            </li>
            <li class="menu-item menu-item-tags">
              <a href="/tags/" rel="section">文章标签</a>
            </li>
            <li class="menu-item menu-item-categories">
              <a href="/categories/" rel="section">文章分类</a>
            </li>
            <li class="menu-item menu-item-about">
              <a href="/about/" rel="section">关于博主</a>
            </li>
            <li class="menu-item menu-item-message">
              <a href="/message/" rel="section">给我留言</a>
            </li>
            <li class="menu-item menu-item-search">
              <a role="button" class="popup-trigger">搜索 </a>
            </li>
          </ul>
        </nav>
        <div class="search-pop-overlay">
          <div class="popup search-popup">
            <div class="search-header">
              <span class="search-icon">
                <i class="fa fa-search"></i>
              </span>
              <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input">
              </div>
              <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
              </span>
            </div>
            <div id="search-result">
              <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
      <span>0%</span>
    </div>
    <div class="reading-progress-bar"></div>
    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div class="topbanner">
            <a href="https://item.jd.com/13527222.html" target="_blank">
              <img src="https://cdn.cuiqingcai.com/prwgs.png">
            </a>
          </div>
          <div class="content post posts-expand">
            <article itemscope itemtype="http://schema.org/Article" class="post-block single" lang="zh-CN">
              <link itemprop="mainEntityOfPage" href="https://cuiqingcai.com/2022111.html">
              <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
                <meta itemprop="image" content="/images/avatar.png">
                <meta itemprop="name" content="崔庆才">
                <meta itemprop="description" content="静觅丨崔庆才的个人站点专业为您提供爬虫教程,爬虫,Python,Python爬虫,Python爬虫教程,爬虫书的相关信息，想要了解更多详情，请联系我们。">
              </span>
              <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
                <meta itemprop="name" content="静觅">
              </span>
              <header class="post-header">
                <h1 class="post-title" itemprop="name headline"> 【2022 年】Python3 爬虫教程 - JavaScript 网站加密和混淆技术简介 </h1>
                <div class="post-meta">
                  <span class="post-meta-item">
                    <span class="post-meta-item-icon">
                      <i class="far fa-user"></i>
                    </span>
                    <span class="post-meta-item-text">作者</span>
                    <span><a href="/authors/崔庆才" class="author" itemprop="url" rel="index">崔庆才</a></span>
                  </span>
                  <span class="post-meta-item">
                    <span class="post-meta-item-icon">
                      <i class="far fa-calendar"></i>
                    </span>
                    <span class="post-meta-item-text">发表于</span>
                    <time title="创建时间：2022-03-05 14:11:52" itemprop="dateCreated datePublished" datetime="2022-03-05T14:11:52+08:00">2022-03-05</time>
                  </span>
                  <span class="post-meta-item">
                    <span class="post-meta-item-icon">
                      <i class="far fa-folder"></i>
                    </span>
                    <span class="post-meta-item-text">分类于</span>
                    <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                      <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
                    </span> ， <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                      <a href="/categories/Python/%E7%88%AC%E8%99%AB/" itemprop="url" rel="index"><span itemprop="name">爬虫</span></a>
                    </span>
                  </span>
                  <span id="/2022111.html" class="post-meta-item leancloud_visitors" data-flag-title="【2022 年】Python3 爬虫教程 - JavaScript 网站加密和混淆技术简介" title="阅读次数">
                    <span class="post-meta-item-icon">
                      <i class="fa fa-eye"></i>
                    </span>
                    <span class="post-meta-item-text">阅读次数：</span>
                    <span class="leancloud-visitors-count"></span>
                  </span>
                  <span class="post-meta-item" title="本文字数">
                    <span class="post-meta-item-icon">
                      <i class="far fa-file-word"></i>
                    </span>
                    <span class="post-meta-item-text">本文字数：</span>
                    <span>34k</span>
                  </span>
                  <span class="post-meta-item" title="阅读时长">
                    <span class="post-meta-item-icon">
                      <i class="far fa-clock"></i>
                    </span>
                    <span class="post-meta-item-text">阅读时长 &asymp;</span>
                    <span>31 分钟</span>
                  </span>
                </div>
              </header>
              <div class="post-body" itemprop="articleBody">
                <div class="advertisements">
                </div>
                <blockquote>
                  <p>系列文章总目录：<a href="https://cuiqingcai.com/17777.html">【2022 年】Python3 爬虫学习教程</a>，本教程内容多数来自于《Python3 网络爬虫开发实战（第二版）》一书，目前截止 2022 年，可以将爬虫基本技术进行系统讲解，同时将最新前沿爬虫技术如异步、JavaScript 逆向、AST、安卓逆向、Hook、智能解析、群控技术、WebAssembly、大规模分布式、Docker、Kubernetes 等，市面上目前就仅有<a href="https://item.jd.com/13527222.html" target="_blank" rel="noopener">《Python3 网络爬虫开发实战（第二版）》</a>一书了，<a href="https://item.jd.com/13527222.html" target="_blank" rel="noopener">点击了解详情</a>。</p>
                </blockquote>
                <p>随着大数据时代的发展，各个公司的数据保护意识越来越强，大家都在想尽办法保护自家产品的数据不轻易被爬虫爬走。由于网页是提供信息和服务的重要载体，所以对网页上的信息进行保护就成了至关重要的一个环节。</p>
                <p>网页是运行在浏览器端的，当我们浏览一个网页时，其 HTML 代码、 JavaScript 代码都会被下载到浏览器中执行。借助浏览器的开发者工具，我们可以看到网页在加载过程中所有网络请求的详细信息，也能清楚地看到网站运行的 HTML 代码和 JavaScript 代码，这些代码中就包含了网站加载的全部逻辑，如加载哪些资源、请求接口是如何构造的、页面是如何渲染的等等。正因为代码是完全透明的，所以如果我们能够把其中的执行逻辑研究出来，就可以模拟各个网络请求进行数据爬取了。</p>
                <p>然而，事情没有想象得那么简单。随着前端技术的发展，前端代码的打包技术、混淆技术、加密技术也层出不穷，借助于这些技术，各个公司可以在前端对 JavaScript 代码采取一定的保护，比如变量名混淆、执行逻辑混淆、反调试、核心逻辑加密等，这些保护手段使得我们没法很轻易地找出 JavaScript 代码中包含的的执行逻辑。</p>
                <p>在前几章的案例中，我们也试着爬取了各种形式的网站。其中有的网站的数据接口是没有任何验证或加密参数的，我们可以轻松模拟并爬取其中的数据；但有的网站稍显复杂，网站的接口中增加了一些加密参数，同时对 JavaScript 代码采取了上文所述的一些防护措施，当时我们没有直接尝试去破解，而是用 Selenium 等类似工具来实现模拟浏览器执行的方式来进行“所见即所得“的爬取。其实对于后者，我们还有另外一种解决方案，那就是直接逆向 JavaScript 代码，找出其中的加密逻辑，从而直接实现该加密逻辑来进行爬取。如果加密逻辑实在过于复杂，我们也可以找出一些关键入口，从而实现对加密逻辑的单独模拟执行和数据爬取。这些方案难度可能很大，比如关键入口很难寻找，或者加密逻辑难以模拟，可是一旦成功找到突破口，我们便可以不用借助于 Selenium 等工具进行整页数据的渲染而实现数据爬取，这样爬取效率会大幅提升。</p>
                <p>本章我们首先会对 JavaScript 防护技术进行介绍，然后介绍一些常用的 JavaScript 逆向技巧，包括浏览器工具的使用、Hook 技术、AST 技术、特殊混淆技术的处理、WebAssembly 技术的处理。了解了这些技术，我们可以更从容地应对 JavaScript 防护技术。</p>
                <h2 id="1-引入"><a href="#1-引入" class="headerlink" title="1. 引入"></a>1. 引入</h2>
                <p>我们在爬取网站的时候，会遇到一些情况需要分析一些接口或 URL 信息，在这个过程中，我们会遇到各种各样类似加密的情形，比如说：</p>
                <ul>
                  <li>某个网站的 URL 带有一些看不太懂的长串加密参数，要抓取就必须要懂得这些参数是怎么构造的，否则我们连完整的 URL 都构造不出来，更不用说爬取了。</li>
                  <li>分析某个网站的 Ajax 接口的时候，可以看到接口的一些参数也是加密的，或者 Request Headers 里面也可能带有一些加密参数，如果不知道这些参数的具体构造逻辑就没法直接用程序来模拟这些 Ajax 请求。</li>
                  <li>翻看网站的 JavaScript 源代码，可以发现很多压缩了或者看不太懂的字符，比如 JavaScript 文件名被编码，JavaScript 的文件内容都压缩成几行，JavaScript 变量也被修改成单个字符或者一些十六进制的字符，导致我们不好轻易根据 JavaScript 找出某些接口的加密逻辑。</li>
                </ul>
                <p>这些情况呢，基本上都是网站为了保护其本身的一些数据不被轻易抓取而采取的一些措施，我们可以把它归类为两大类：</p>
                <ul>
                  <li>URL/API 参数加密</li>
                  <li>JavaScript 压缩、混淆和加密</li>
                </ul>
                <p>这一节我们就来了解下这两类技术的基本原理和一些常见的示例。知己知彼，百战不殆，了解了这些技术的实现原理之后，我们才能更好地去逆向其中的逻辑，从而实现数据爬取。</p>
                <h2 id="2-网站数据防护方案"><a href="#2-网站数据防护方案" class="headerlink" title="2. 网站数据防护方案"></a>2. 网站数据防护方案</h2>
                <p>当今大数据时代，数据已经变得越来越重要，网页和 App 现在是主流的数据载体，如果其数据的 API 没有设置任何保护措施，在爬虫工程师解决了一些基本的反爬如封 IP、验证码的问题之后，那么数据还是可以被轻松爬取到的。</p>
                <p>那么，有没有可能在 URL/API 层面或 JavaScript 层面也加上一层防护呢？答案是可以。</p>
                <h3 id="URL-API-参数加密"><a href="#URL-API-参数加密" class="headerlink" title="URL/API 参数加密"></a>URL/API 参数加密</h3>
                <p>网站运营者首先想到防护措施可能是对某些数据接口的参数进行加密，比如说对某些 URL 的一些参数加上校验码或者把一些 id 信息进行编码，使其变得难以阅读或构造；或者对某些 API 请求加上一些 token、sign 等签名，这样这些请求发送到服务器时，服务器会通过客户端发来的一些请求信息以及双方约定好的秘钥等来对当前的请求进行校验，如果校验通过，才返回对应数据结果。</p>
                <p>比如说客户端和服务端约定一种接口校验逻辑，客户端在每次请求服务端接口的时候都会附带一个 sign 参数，这个 sign 参数可能是由当前时间信息、请求的 URL、请求的数据、设备的 ID、双方约定好的秘钥经过一些加密算法构造而成的，客户端会实现这个加密算法构造 sign，然后每次请求服务器的时候附带上这个参数。服务端会根据约定好的算法和请求的数据对 sign 进行校验，如果校验通过，才返回对应的数据，否则拒绝响应。</p>
                <p>当然登录状态的校验也可以看作是此类方案，比如一个 API 的调用必须要传一个 token，这个 token 必须用户登录之后才能获取，如果请求的时候不带该 token，API 就不会返回任何数据。</p>
                <p>倘若没有这种措施，那么基本上 URL 或者 API 接口是完全公开可以访问的，这意味着任何人都可以直接调用来获取数据，几乎是零防护的状态，这样是非常危险的，而且数据也可以被轻易地被爬虫爬取。因此对 URL/API 参数一些加密和校验是非常有必要的。</p>
                <h3 id="JavaScript-压缩、混淆和加密"><a href="#JavaScript-压缩、混淆和加密" class="headerlink" title="JavaScript 压缩、混淆和加密"></a>JavaScript 压缩、混淆和加密</h3>
                <p>接口加密技术看起来的确是一个不错的解决方案，但单纯依靠它并不能很好地解决问题。为什么呢？</p>
                <p>对于网页来说，其逻辑是依赖于 JavaScript 来实现的，JavaScript 有如下特点：</p>
                <ul>
                  <li>JavaScript 代码运行于客户端，也就是它必须要在用户浏览器端加载并运行。</li>
                  <li>JavaScript 代码是公开透明的，也就是说浏览器可以直接获取到正在运行的 JavaScript 的源码。</li>
                </ul>
                <p>由于这两个原因，至使 JavaScript 代码是不安全的，任何人都可以读、分析、复制、盗用，甚至篡改。</p>
                <p>所以说，对于上述情形，客户端 JavaScript 对于某些加密的实现是很容易被找到或模拟的，了解了加密逻辑后，模拟参数的构造和请求也就是轻而易举了，所以如果 JavaScript 没有做任何层面的保护的话，接口加密技术基本上对数据起不到什么防护作用。</p>
                <p>如果你不想让自己的数据被轻易获取，不想他人了解 JavaScript 逻辑的实现，或者想降低被不怀好意的人甚至是黑客攻击。那么就需要用到 JavaScript 压缩、混淆和加密技术了。</p>
                <p>这里压缩、混淆和加密技术简述如下：</p>
                <ul>
                  <li>代码压缩：即去除 JavaScript 代码中的不必要的空格、换行等内容，使源码都压缩为几行内容，降低代码可读性，当然同时也能提高网站的加载速度。</li>
                </ul>
                <ul>
                  <li>代码混淆：使用变量替换、字符串阵列化、控制流平坦化、多态变异、僵尸函数、调试保护等手段，使代码变地难以阅读和分析，达到最终保护的目的。但这不影响代码原有功能。是理想、实用的 JavaScript 保护方案。</li>
                  <li>代码加密：可以通过某种手段将 JavaScript 代码进行加密，转成人无法阅读或者解析的代码，如借用 WebAssembly 技术，可以直接将 JavaScript 代码用 C/C++ 实现，JavaScript 调用其编译后形成的文件来执行相应的功能。</li>
                </ul>
                <p>下面我们对上面的技术分别予以介绍。</p>
                <h2 id="3-URL-API-参数加密"><a href="#3-URL-API-参数加密" class="headerlink" title="3. URL/API 参数加密"></a>3. URL/API 参数加密</h2>
                <p>现在绝大多数网站的数据一般都是通过服务器提供的 API 来获取的，网站或 App 可以请求某个数据 API 获取到对应的数据，然后再把获取的数据展示出来。但有些数据是比较宝贵或私密的，这些数据肯定是需要一定层面上的保护。所以不同 API 的实现也就对应着不同的安全防护级别，我们这里来总结下。</p>
                <p>为了提升接口的安全性，客户端会和服务端约定一种接口校验方式，一般来说会使用到各种加密和编码算法，如 Base64、Hex 编码，MD5、AES、DES、RSA 等对称或非对称加密。</p>
                <p>举个例子，比如说客户端和服务器双方约定一个 sign 用作接口的签名校验，其生成逻辑是客户端将 URL Path 进行 MD5 加密然后拼接上 URL 的某个参数再进行 Base64 编码，最后得到一个字符串 sign，这个 sign 会通过 Request URL 的某个参数或 Request Headers 发送给服务器。服务器接收到请求后，对 URL Path 同样进行 MD5 加密，然后拼接上 URL 的某个参数，也进行 Base64 编码也得到了一个 sign，然后比对生成的 sign 和客户端发来的 sign 是否是一致的，如果是一致的，那就返回正确的结果，否则拒绝响应。这就是一个比较简单的接口参数加密的实现。如果有人想要调用这个接口的话，必须要定义好 sign 的生成逻辑，否则是无法正常调用接口的。</p>
                <p>当然上面的这个实现思路比较简单，这里还可以增加一些时间戳信息增加时效性判断，或增加一些非对称加密进一步提高加密的复杂程度。但不管怎样，只要客户端和服务器约定好了加密和校验逻辑，任何形式加密算法都是可以的。</p>
                <p>这里要实现接口参数加密就需要用到一些加密算法，客户端和服务器肯定也都有对应的 SDK 实现这些加密算法，如 JavaScript 的 crypto-js，Python 的 hashlib、Crypto 等等。</p>
                <p>但还是如上文所说，如果是网页的话，客户端实现加密逻辑如果是用 JavaScript 来实现，其源代码对用户是完全可见的，如果没有对 JavaScript 做任何保护的话，是很容易弄清楚客户端加密的流程的。</p>
                <p>因此，我们需要对 JavaScript 利用压缩、混淆等方式来对客户端的逻辑进行一定程度上的保护。</p>
                <h2 id="4-JavaScript-压缩"><a href="#4-JavaScript-压缩" class="headerlink" title="4. JavaScript 压缩"></a>4. JavaScript 压缩</h2>
                <p>这个非常简单，JavaScript 压缩即去除 JavaScript 代码中的不必要的空格、换行等内容或者把一些可能公用的代码进行处理实现共享，最后输出的结果都压缩为几行内容，代码可读性变得很差，同时也能提高网站加载速度。</p>
                <p>如果仅仅是去除空格换行这样的压缩方式，其实几乎是没有任何防护作用的，因为这种压缩方式仅仅是降低了代码的直接可读性。如果我们有一些格式化工具可以轻松将 JavaScript 代码变得易读，比如利用 IDE、在线工具或 Chrome 浏览器都能还原格式化的代码。</p>
                <p>比如这里举一个最简单的 JavaScript 压缩示例，原来的 JavaScript 代码是这样的：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">echo</span>(<span class="params">stringA, stringB</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> name = <span class="string">"Germey"</span>;</span><br><span class="line">  alert(<span class="string">"hello "</span> + name);</span><br><span class="line">&#125;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>压缩之后就变成这样子：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">echo</span>(<span class="params">d, c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> e = <span class="string">"Germey"</span>;</span><br><span class="line">  alert(<span class="string">"hello "</span> + e);</span><br><span class="line">&#125;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到这里参数的名称都被简化了，代码中的空格也被去掉了，整个代码也被压缩成了一行，代码的整体可读性降低了。</p>
                <p>目前主流的前端开发技术大多都会利用 Webpack、Rollup 等工具进行打包，Webpack、Rollup 会对源代码进行编译和压缩，输出几个打包好的 JavaScript 文件，其中我们可以看到输出的 JavaScript 文件名带有一些不规则字符串，同时文件内容可能只有几行内容，变量名都是一些简单字母表示。这其中就包含 JavaScript 压缩技术，比如一些公共的库输出成 bundle 文件，一些调用逻辑压缩和转义成冗长的几行代码，这些都属于 JavaScript 压缩。另外其中也包含了一些很基础的 JavaScript 混淆技术，比如把变量名、方法名替换成一些简单字符，降低代码可读性。</p>
                <p>但整体来说，JavaScript 压缩技术只能在很小的程度上起到防护作用，要想真正提高防护效果还得依靠 JavaScript 混淆和加密技术。</p>
                <h2 id="5-JavaScript-混淆"><a href="#5-JavaScript-混淆" class="headerlink" title="5. JavaScript 混淆"></a>5. JavaScript 混淆</h2>
                <p>JavaScript 混淆是完全是在 JavaScript 上面进行的处理，它的目的就是使得 JavaScript 变得难以阅读和分析，大大降低代码可读性，是一种很实用的 JavaScript 保护方案。</p>
                <p>JavaScript 混淆技术主要有以下几种：</p>
                <ul>
                  <li>
                    <p>变量混淆：将带有含义的变量名、方法名、常量名随机变为无意义的类乱码字符串，降低代码可读性，如转成单个字符或十六进制字符串。</p>
                  </li>
                  <li>
                    <p>字符串混淆：将字符串阵列化集中放置、并可进行 MD5 或 Base64 加密存储，使代码中不出现明文字符串，这样可以避免使用全局搜索字符串的方式定位到入口点。</p>
                  </li>
                  <li>
                    <p>属性加密：针对 JavaScript 对象的属性进行加密转化，隐藏代码之间的调用关系。</p>
                  </li>
                  <li>
                    <p>控制流平坦化：打乱函数原有代码执行流程及函数调用关系，使代码逻变得混乱无序。</p>
                  </li>
                  <li>
                    <p>无用代码注入：随机在代码中插入不会被执行到的无用代码，进一步使代码看起来更加混乱。</p>
                  </li>
                  <li>
                    <p>调试保护：基于调试器特性，对当前运行环境进行检验，加入一些强制调试 debugger 语句，使其在调试模式下难以顺利执行 JavaScript 代码。</p>
                  </li>
                  <li>
                    <p>多态变异：使 JavaScript 代码每次被调用时，将代码自身即立刻自动发生变异，变化为与之前完全不同的代码，即功能完全不变，只是代码形式变异，以此杜绝代码被动态分析调试。</p>
                  </li>
                  <li>
                    <p>锁定域名：使 JavaScript 代码只能在指定域名下执行。</p>
                  </li>
                  <li>
                    <p>反格式化：如果对 JavaScript 代码进行格式化，则无法执行，导致浏览器假死。</p>
                  </li>
                  <li>
                    <p>特殊编码：将 JavaScript 完全编码为人不可读的代码，如表情符号、特殊表示内容等等。</p>
                  </li>
                </ul>
                <p>总之，以上方案都是 JavaScript 混淆的实现方式，可以在不同程度上保护 JavaScript 代码。</p>
                <p>在前端开发中，现在 JavaScript 混淆主流的实现是 javascript-obfuscator (<a href="https://github.com/javascript-obfuscator/javascript-obfuscator" target="_blank" rel="noopener">https://github.com/javascript-obfuscator/javascript-obfuscator</a>) 和 terser (<a href="https://github.com/terser/terser" target="_blank" rel="noopener">https://github.com/terser/terser</a>) 这两个库，其都能提供一些代码混淆功能，也都有对应的 Webpack 和 Rollup 打包工具的插件，利用它们我们可以非常方便地实现页面的混淆，最终可以输出压缩和混淆后的 JavaScript 代码，使得 JavaScript 代码可读性大大降低。</p>
                <p>下面我们以 javascript-obfuscator 为例来介绍一些代码混淆的实现，了解了实现，那么自然我们就对混淆的机理有了更加深刻的认识。</p>
                <p>javascript-obfuscator 的官网地址为：<a href="https://obfuscator.io/，其官方介绍内容如下：" target="_blank" rel="noopener">https://obfuscator.io/，其官方介绍内容如下：</a></p>
                <blockquote>
                  <p>A free and efficient obfuscator for JavaScript (including ES2017). Make your code harder to copy and prevent people from stealing your work.</p>
                </blockquote>
                <p>它是支持 ES8 的免费、高效的 JavaScript 混淆库，它可以使得你的 JavaScript 代码经过混淆后难以被复制、盗用，混淆后的代码具有和原来的代码一模一样的功能。</p>
                <p>怎么使用呢？首先，我们需要安装好 Node.js 12.x 版本及以上，确保可以正常使用 npm 命令，具体的安装方式可以参考：<a href="https://setup.scrape.center/nodejs。" target="_blank" rel="noopener">https://setup.scrape.center/nodejs。</a></p>
                <p>接着新建一个文件夹，比如 js-obfuscate，然后进入该文件夹，初始化工作空间：</p>
                <figure class="highlight shell">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">npm init</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这里会提示我们输入一些信息，创建一个 package.json 文件，这就完成了项目初始化了。</p>
                <p>接下来我们来安装 javascript-obfuscator 这个库：</p>
                <figure class="highlight shell">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">npm i -D javascript-obfuscator</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>稍等片刻，即可看到本地 js-obfuscate 文件夹下生成了一个 node_modules 文件夹，里面就包含了 javascript-obfuscator 这个库，这就说明安装成功了，文件夹结构如图所示：</p>
                <p><img src="https://cdn.cuiqingcai.com/viunz.png" alt="image-20210612155500985"></p>
                <p>接下来我们就可以编写代码来实现一个混淆样例了，如新建一个 main.js 文件，内容如下：</p>
                <figure class="highlight js">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let x = '1' + 1</span></span><br><span class="line"><span class="string">console.log('x', x)</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">  controlFlowFlattening: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obfuscator = <span class="built_in">require</span>(<span class="string">"javascript-obfuscator"</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">obfuscate</span>(<span class="params">code, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> obfuscator.obfuscate(code, options).getObfuscatedCode();</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obfuscate(code, options));</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>在这里我们定义了两个变量，一个是 code，即需要被混淆的代码，另一个是混淆选项，是一个 Object。接下来我们引入了 javascript-obfuscator 这库，然后定义了一个方法，传入 code 和 options，来获取混淆后的代码，最后控制台输出混淆后的代码。</p>
                <p>代码逻辑比较简单，我们来执行一下代码：</p>
                <figure class="highlight shell">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">node main.js</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>输出结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x53bf = [<span class="string">"log"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x1d84fe, _0x3aeda0</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x10a5a = <span class="function"><span class="keyword">function</span> (<span class="params">_0x2f0a52</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x2f0a52) &#123;</span><br><span class="line">      _0x1d84fe[<span class="string">"push"</span>](_0x1d84fe[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x10a5a(++_0x3aeda0);</span><br><span class="line">&#125;)(_0x53bf, <span class="number">0x172</span>);</span><br><span class="line"><span class="keyword">var</span> _0x480a = <span class="function"><span class="keyword">function</span> (<span class="params">_0x4341e5, _0x5923b4</span>) </span>&#123;</span><br><span class="line">  _0x4341e5 = _0x4341e5 - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0xb3622e = _0x53bf[_0x4341e5];</span><br><span class="line">  <span class="keyword">return</span> _0xb3622e;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> x = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[_0x480a(<span class="string">"0x0"</span>)](<span class="string">"x"</span>, x);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>看到了吧，那么简单的两行代码，被我们混淆成了这个样子，其实这里我们就是设定了一个「控制流平坦化」的选项。整体看来，代码的可读性大大降低，也大大加大了 JavaScript 调试的难度。</p>
                <p>好，那么我们来跟着 javascript-obfuscator 走一遍，就能具体知道 JavaScript 混淆到底有多少方法了。</p>
                <blockquote>
                  <p>注意：由于这些例子中，调用 javascript-obfuscator 进行混淆的实现是一样的，所以下文的示例只说明 code 和 options 变量的修改，完整代码请自行补全。</p>
                </blockquote>
                <h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3>
                <p>这里 javascript-obfuscator 也提供了代码压缩的功能，使用其参数 compact 即可完成 JavaScript 代码的压缩，输出为一行内容。默认是 true，如果定义为 false，则混淆后的代码会分行显示。</p>
                <p>示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let x = '1' + 1</span></span><br><span class="line"><span class="string">console.log('x', x)</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这里我们先把代码压缩 compact 选项设置为 false，运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">let</span> x = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[<span class="string">"log"</span>](<span class="string">"x"</span>, x);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>如果不设置 compact 或把 compact 设置为 true，结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x151c = [<span class="string">"log"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x1ce384, _0x20a7c7</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x25fc92 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x188aec</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x188aec) &#123;</span><br><span class="line">      _0x1ce384[<span class="string">"push"</span>](_0x1ce384[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x25fc92(++_0x20a7c7);</span><br><span class="line">&#125;)(_0x151c, <span class="number">0x1b7</span>);</span><br><span class="line"><span class="keyword">var</span> _0x553e = <span class="function"><span class="keyword">function</span> (<span class="params">_0x259219, _0x241445</span>) </span>&#123;</span><br><span class="line">  _0x259219 = _0x259219 - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x56d72d = _0x151c[_0x259219];</span><br><span class="line">  <span class="keyword">return</span> _0x56d72d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> x = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[_0x553e(<span class="string">"0x0"</span>)](<span class="string">"x"</span>, x);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到单行显示的时候，对变量名进行了进一步的混淆，这里变量的命名都变成了 16 进制形式的字符串，这是因为启用了一些默认压缩和混淆配置导致的。总之我们可以看到代码的可读性相比之前大大降低了。</p>
                <h3 id="变量名混淆"><a href="#变量名混淆" class="headerlink" title="变量名混淆"></a>变量名混淆</h3>
                <p>变量名混淆可以通过在 javascript-obfuscator 中配置 identifierNamesGenerator 参数实现，我们通过这个参数可以控制变量名混淆的方式，如 hexadecimal 则会替换为 16 进制形式的字符串，在这里我们可以设定如下值：</p>
                <ul>
                  <li>hexadecimal：将变量名替换为 16 进制形式的字符串，如 <code>0xabc123</code>。</li>
                  <li>mangled：将变量名替换为普通的简写字符，如 <code>a</code>、<code>b</code>、<code>c</code> 等。</li>
                </ul>
                <p>该参数的值默认为 hexadecimal。</p>
                <p>我们将该参数修改为 mangled 来试一下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let hello = '1' + 1</span></span><br><span class="line"><span class="string">console.log('hello', hello)</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">true</span>,</span><br><span class="line">  identifierNamesGenerator: <span class="string">"mangled"</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> a = [<span class="string">"hello"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">c, d</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> e = <span class="function"><span class="keyword">function</span> (<span class="params">f</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--f) &#123;</span><br><span class="line">      c[<span class="string">"push"</span>](c[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  e(++d);</span><br><span class="line">&#125;)(a, <span class="number">0x9b</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params">c, d</span>) </span>&#123;</span><br><span class="line">  c = c - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> e = a[c];</span><br><span class="line">  <span class="keyword">return</span> e;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> hello = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[<span class="string">"log"</span>](b(<span class="string">"0x0"</span>), hello);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到这里的变量命名都变成了 <code>a</code>、<code>b</code> 等形式。</p>
                <p>如果我们将 identifierNamesGenerator 修改为 hexadecimal 或者不设置，运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x4e98 = [<span class="string">"log"</span>, <span class="string">"hello"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x4464de, _0x39de6c</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0xdffdda = <span class="function"><span class="keyword">function</span> (<span class="params">_0x6a95d5</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x6a95d5) &#123;</span><br><span class="line">      _0x4464de[<span class="string">"push"</span>](_0x4464de[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0xdffdda(++_0x39de6c);</span><br><span class="line">&#125;)(_0x4e98, <span class="number">0xc8</span>);</span><br><span class="line"><span class="keyword">var</span> _0x53cb = <span class="function"><span class="keyword">function</span> (<span class="params">_0x393bda, _0x8504e7</span>) </span>&#123;</span><br><span class="line">  _0x393bda = _0x393bda - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x46ab80 = _0x4e98[_0x393bda];</span><br><span class="line">  <span class="keyword">return</span> _0x46ab80;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> hello = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[_0x53cb(<span class="string">"0x0"</span>)](_0x53cb(<span class="string">"0x1"</span>), hello);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到选用了 mangled，其代码体积会更小，但 hexadecimal 其可读性会更低。</p>
                <p>另外我们还可以通过设置 identifiersPrefix 参数来控制混淆后的变量前缀，示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">let hello = '1' + 1</span></span><br><span class="line"><span class="string">console.log('hello', hello)</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  identifiersPrefix: <span class="string">"germey"</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> germey_0x3dea = [<span class="string">"log"</span>, <span class="string">"hello"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x348ff3, _0x5330e8</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x1568b1 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x4740d8</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x4740d8) &#123;</span><br><span class="line">      _0x348ff3[<span class="string">"push"</span>](_0x348ff3[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x1568b1(++_0x5330e8);</span><br><span class="line">&#125;)(germey_0x3dea, <span class="number">0x94</span>);</span><br><span class="line"><span class="keyword">var</span> germey_0x30e4 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x2e8f7c, _0x1066a8</span>) </span>&#123;</span><br><span class="line">  _0x2e8f7c = _0x2e8f7c - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x5166ba = germey_0x3dea[_0x2e8f7c];</span><br><span class="line">  <span class="keyword">return</span> _0x5166ba;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> hello = <span class="string">"1"</span> + <span class="number">0x1</span>;</span><br><span class="line"><span class="built_in">console</span>[germey_0x30e4(<span class="string">"0x0"</span>)](germey_0x30e4(<span class="string">"0x1"</span>), hello);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到混淆后的变量前缀加上了我们自定义的字符串 germey。</p>
                <p>另外 renameGlobals 这个参数还可以指定是否混淆全局变量和函数名称，默认为 false。示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">var $ = function(id) &#123;</span></span><br><span class="line"><span class="string">    return document.getElementById(id);</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  renameGlobals: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x4864b0 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x5763be</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>[<span class="string">"getElementById"</span>](_0x5763be);</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到这里我们声明了一个全局变量 <script type="math/tex">`，在 renameGlobals 设置为 true 之后，`</script> 这个变量也被替换了。如果后文用到了这个 <code>$</code> 对象，可能就会有找不到定义的错误，因此这个参数可能导致代码执行不通。</p>
                <p>如果我们不设置 renameGlobals 或者设置为 false，结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x239a = [<span class="string">"getElementById"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x3f45a3, _0x583dfa</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x2cade2 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x28479a</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x28479a) &#123;</span><br><span class="line">      _0x3f45a3[<span class="string">"push"</span>](_0x3f45a3[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x2cade2(++_0x583dfa);</span><br><span class="line">&#125;)(_0x239a, <span class="number">0xe1</span>);</span><br><span class="line"><span class="keyword">var</span> _0x3758 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x18659d, _0x50c21d</span>) </span>&#123;</span><br><span class="line">  _0x18659d = _0x18659d - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x531b8d = _0x239a[_0x18659d];</span><br><span class="line">  <span class="keyword">return</span> _0x531b8d;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> $ = <span class="function"><span class="keyword">function</span> (<span class="params">_0x3d8723</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">document</span>[_0x3758(<span class="string">"0x0"</span>)](_0x3d8723);</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，最后还是有 <code>$</code> 的声明，其全局名称没有被改变。</p>
                <h3 id="字符串混淆"><a href="#字符串混淆" class="headerlink" title="字符串混淆"></a>字符串混淆</h3>
                <p>字符串混淆，即将一个字符串声明放到一个数组里面，使之无法被直接搜索到。我们可以通过控制 stringArray 参数来控制，默认为 true。</p>
                <p>我们还可以通过 rotateStringArray 参数来控制数组化后结果的的元素顺序，默认为 true。还可以通过 stringArrayEncoding 参数来控制数组的编码形式，默认不开启编码，如果设置为 true 或 base64，则会使用 Base64 编码，如果设置为 rc4，则使用 RC4 编码。另外可以通过 stringArrayThreshold 来控制启用编码的概率，范围 0 到 1，默认 0.8。</p>
                <p>示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">var a = 'hello world'   </span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  stringArray: <span class="literal">true</span>,</span><br><span class="line">  rotateStringArray: <span class="literal">true</span>,</span><br><span class="line">  stringArrayEncoding: <span class="literal">true</span>, <span class="comment">// 'base64' 或 'rc4' 或 false</span></span><br><span class="line">  stringArrayThreshold: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x4215 = [<span class="string">"aGVsbG8gd29ybGQ="</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x42bf17, _0x4c348f</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x328832 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x355be1</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x355be1) &#123;</span><br><span class="line">      _0x42bf17[<span class="string">"push"</span>](_0x42bf17[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x328832(++_0x4c348f);</span><br><span class="line">&#125;)(_0x4215, <span class="number">0x1da</span>);</span><br><span class="line"><span class="keyword">var</span> _0x5191 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x3cf2ba, _0x1917d8</span>) </span>&#123;</span><br><span class="line">  _0x3cf2ba = _0x3cf2ba - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x1f93f0 = _0x4215[_0x3cf2ba];</span><br><span class="line">  <span class="keyword">if</span> (_0x5191[<span class="string">"LqbVDH"</span>] === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _0x5096b2;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> _0x282db1 = <span class="built_in">Function</span>(</span><br><span class="line">          <span class="string">"return\x20(function()\x20"</span> +</span><br><span class="line">            <span class="string">"&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)"</span> +</span><br><span class="line">            <span class="string">");"</span></span><br><span class="line">        );</span><br><span class="line">        _0x5096b2 = _0x282db1();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (_0x2acb9c) &#123;</span><br><span class="line">        _0x5096b2 = <span class="built_in">window</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">var</span> _0x388c14 =</span><br><span class="line">        <span class="string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="</span>;</span><br><span class="line">      _0x5096b2[<span class="string">"atob"</span>] ||</span><br><span class="line">        (_0x5096b2[<span class="string">"atob"</span>] = <span class="function"><span class="keyword">function</span> (<span class="params">_0x4cc27c</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">var</span> _0x2af4ae = <span class="built_in">String</span>(_0x4cc27c)[<span class="string">"replace"</span>](<span class="regexp">/=+$/</span>, <span class="string">""</span>);</span><br><span class="line">          <span class="keyword">for</span> (</span><br><span class="line">            <span class="keyword">var</span> _0x21400b = <span class="number">0x0</span>,</span><br><span class="line">              _0x3f4e2e,</span><br><span class="line">              _0x5b193b,</span><br><span class="line">              _0x233381 = <span class="number">0x0</span>,</span><br><span class="line">              _0x3dccf7 = <span class="string">""</span>;</span><br><span class="line">            (_0x5b193b = _0x2af4ae[<span class="string">"charAt"</span>](_0x233381++));</span><br><span class="line">            ~_0x5b193b &amp;&amp;</span><br><span class="line">            ((_0x3f4e2e =</span><br><span class="line">              _0x21400b % <span class="number">0x4</span> ? _0x3f4e2e * <span class="number">0x40</span> + _0x5b193b : _0x5b193b),</span><br><span class="line">            _0x21400b++ % <span class="number">0x4</span>)</span><br><span class="line">              ? (_0x3dccf7 += <span class="built_in">String</span>[<span class="string">"fromCharCode"</span>](</span><br><span class="line">                  <span class="number">0xff</span> &amp; (_0x3f4e2e &gt;&gt; ((<span class="number">-0x2</span> * _0x21400b) &amp; <span class="number">0x6</span>))</span><br><span class="line">                ))</span><br><span class="line">              : <span class="number">0x0</span></span><br><span class="line">          ) &#123;</span><br><span class="line">            _0x5b193b = _0x388c14[<span class="string">"indexOf"</span>](_0x5b193b);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> _0x3dccf7;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line">    _0x5191[<span class="string">"DuIurT"</span>] = <span class="function"><span class="keyword">function</span> (<span class="params">_0x51888e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _0x29801f = atob(_0x51888e);</span><br><span class="line">      <span class="keyword">var</span> _0x561e62 = [];</span><br><span class="line">      <span class="keyword">for</span> (</span><br><span class="line">        <span class="keyword">var</span> _0x5dd788 = <span class="number">0x0</span>, _0x1a8b73 = _0x29801f[<span class="string">"length"</span>];</span><br><span class="line">        _0x5dd788 &lt; _0x1a8b73;</span><br><span class="line">        _0x5dd788++</span><br><span class="line">      ) &#123;</span><br><span class="line">        _0x561e62 +=</span><br><span class="line">          <span class="string">"%"</span> +</span><br><span class="line">          (<span class="string">"00"</span> + _0x29801f[<span class="string">"charCodeAt"</span>](_0x5dd788)[<span class="string">"toString"</span>](<span class="number">0x10</span>))[</span><br><span class="line">            <span class="string">"slice"</span></span><br><span class="line">          ](<span class="number">-0x2</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(_0x561e62);</span><br><span class="line">    &#125;;</span><br><span class="line">    _0x5191[<span class="string">"mgoBRd"</span>] = &#123;&#125;;</span><br><span class="line">    _0x5191[<span class="string">"LqbVDH"</span>] = !![];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _0x1741f0 = _0x5191[<span class="string">"mgoBRd"</span>][_0x3cf2ba];</span><br><span class="line">  <span class="keyword">if</span> (_0x1741f0 === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    _0x1f93f0 = _0x5191[<span class="string">"DuIurT"</span>](_0x1f93f0);</span><br><span class="line">    _0x5191[<span class="string">"mgoBRd"</span>][_0x3cf2ba] = _0x1f93f0;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    _0x1f93f0 = _0x1741f0;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> _0x1f93f0;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = _0x5191(<span class="string">"0x0"</span>);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到这里就把字符串进行了 Base64 编码，我们再也无法通过查找的方式找到字符串的位置了。</p>
                <p>如果将 stringArray 设置为 false 的话，输出就是这样：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> a = <span class="string">"hello\x20world"</span>;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>字符串就仍然是明文显示的，没有被编码。</p>
                <p>另外我们还可以使用 unicodeEscapeSequence 这个参数对字符串进行 Unicode 转码，使之更加难以辨认，示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">var a = 'hello world'</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">  unicodeEscapeSequence: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x5c0d = [<span class="string">"\x68\x65\x6c\x6c\x6f\x20\x77\x6f\x72\x6c\x64"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x54cc9c, _0x57a3b2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0xf833cf = <span class="function"><span class="keyword">function</span> (<span class="params">_0x3cd8c6</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x3cd8c6) &#123;</span><br><span class="line">      _0x54cc9c[<span class="string">"push"</span>](_0x54cc9c[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0xf833cf(++_0x57a3b2);</span><br><span class="line">&#125;)(_0x5c0d, <span class="number">0x17d</span>);</span><br><span class="line"><span class="keyword">var</span> _0x28e8 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x3fd645, _0x2cf5e7</span>) </span>&#123;</span><br><span class="line">  _0x3fd645 = _0x3fd645 - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x298a20 = _0x5c0d[_0x3fd645];</span><br><span class="line">  <span class="keyword">return</span> _0x298a20;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> a = _0x28e8(<span class="string">"0x0"</span>);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，这里字符串被数字化和 Unicode 化，非常难以辨认。</p>
                <p>在很多 JavaScript 逆向的过程中，一些关键的字符串可能会作为切入点来查找加密入口。用了这种混淆之后，如果有人想通过全局搜索的方式搜索 hello 这样的字符串找加密入口，也没法搜到了。</p>
                <h3 id="代码自我保护"><a href="#代码自我保护" class="headerlink" title="代码自我保护"></a>代码自我保护</h3>
                <p>我们可以通过设置 selfDefending 参数来开启代码自我保护功能。开启之后，混淆后的 JavaScript 会以强制一行形式显示，如果我们将混淆后的代码进行格式化或者重命名，该段代码将无法执行。</p>
                <p>示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">console.log('hello world')</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  selfDefending: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x26da = [<span class="string">"log"</span>, <span class="string">"hello\x20world"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x190327, _0x57c2c0</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x577762 = <span class="function"><span class="keyword">function</span> (<span class="params">_0xc9dabb</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0xc9dabb) &#123;</span><br><span class="line">      _0x190327[<span class="string">"push"</span>](_0x190327[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x35976e = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x16b3fe = &#123;</span><br><span class="line">      data: &#123; <span class="attr">key</span>: <span class="string">"cookie"</span>, <span class="attr">value</span>: <span class="string">"timeout"</span> &#125;,</span><br><span class="line">      setCookie: <span class="function"><span class="keyword">function</span> (<span class="params">_0x2d52d5, _0x16feda, _0x57cadf, _0x56056f</span>) </span>&#123;</span><br><span class="line">        _0x56056f = _0x56056f || &#123;&#125;;</span><br><span class="line">        <span class="keyword">var</span> _0x5b6dc3 = _0x16feda + <span class="string">"="</span> + _0x57cadf;</span><br><span class="line">        <span class="keyword">var</span> _0x333ced = <span class="number">0x0</span>;</span><br><span class="line">        <span class="keyword">for</span> (</span><br><span class="line">          <span class="keyword">var</span> _0x333ced = <span class="number">0x0</span>, _0x19ae36 = _0x2d52d5[<span class="string">"length"</span>];</span><br><span class="line">          _0x333ced &lt; _0x19ae36;</span><br><span class="line">          _0x333ced++</span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="keyword">var</span> _0x409587 = _0x2d52d5[_0x333ced];</span><br><span class="line">          _0x5b6dc3 += <span class="string">";\x20"</span> + _0x409587;</span><br><span class="line">          <span class="keyword">var</span> _0x4aa006 = _0x2d52d5[_0x409587];</span><br><span class="line">          _0x2d52d5[<span class="string">"push"</span>](_0x4aa006);</span><br><span class="line">          _0x19ae36 = _0x2d52d5[<span class="string">"length"</span>];</span><br><span class="line">          <span class="keyword">if</span> (_0x4aa006 !== !![]) &#123;</span><br><span class="line">            _0x5b6dc3 += <span class="string">"="</span> + _0x4aa006;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _0x56056f[<span class="string">"cookie"</span>] = _0x5b6dc3;</span><br><span class="line">      &#125;,</span><br><span class="line">      removeCookie: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"dev"</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      getCookie: <span class="function"><span class="keyword">function</span> (<span class="params">_0x30c497, _0x51923d</span>) </span>&#123;</span><br><span class="line">        _0x30c497 =</span><br><span class="line">          _0x30c497 ||</span><br><span class="line">          <span class="function"><span class="keyword">function</span> (<span class="params">_0x4b7e18</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> _0x4b7e18;</span><br><span class="line">          &#125;;</span><br><span class="line">        <span class="keyword">var</span> _0x557e06 = _0x30c497(</span><br><span class="line">          <span class="keyword">new</span> <span class="built_in">RegExp</span>(</span><br><span class="line">            <span class="string">"(?:^|;\x20)"</span> +</span><br><span class="line">              _0x51923d[<span class="string">"replace"</span>](<span class="regexp">/([.$?*|&#123;&#125;()[]\/+^])/g</span>, <span class="string">"$1"</span>) +</span><br><span class="line">              <span class="string">"=([^;]*)"</span></span><br><span class="line">          )</span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">var</span> _0x817646 = <span class="function"><span class="keyword">function</span> (<span class="params">_0xf3fae7, _0x5d8208</span>) </span>&#123;</span><br><span class="line">          _0xf3fae7(++_0x5d8208);</span><br><span class="line">        &#125;;</span><br><span class="line">        _0x817646(_0x577762, _0x57c2c0);</span><br><span class="line">        <span class="keyword">return</span> _0x557e06 ? <span class="built_in">decodeURIComponent</span>(_0x557e06[<span class="number">0x1</span>]) : <span class="literal">undefined</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> _0x4673cd = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _0x4c6c5c = <span class="keyword">new</span> <span class="built_in">RegExp</span>(</span><br><span class="line">        <span class="string">"\x5cw+\x20*\x5c(\x5c)\x20*&#123;\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*&#125;"</span></span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> _0x4c6c5c[<span class="string">"test"</span>](_0x16b3fe[<span class="string">"removeCookie"</span>][<span class="string">"toString"</span>]());</span><br><span class="line">    &#125;;</span><br><span class="line">    _0x16b3fe[<span class="string">"updateCookie"</span>] = _0x4673cd;</span><br><span class="line">    <span class="keyword">var</span> _0x5baa80 = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">var</span> _0x1faf19 = _0x16b3fe[<span class="string">"updateCookie"</span>]();</span><br><span class="line">    <span class="keyword">if</span> (!_0x1faf19) &#123;</span><br><span class="line">      _0x16b3fe[<span class="string">"setCookie"</span>]([<span class="string">"*"</span>], <span class="string">"counter"</span>, <span class="number">0x1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_0x1faf19) &#123;</span><br><span class="line">      _0x5baa80 = _0x16b3fe[<span class="string">"getCookie"</span>](<span class="literal">null</span>, <span class="string">"counter"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      _0x16b3fe[<span class="string">"removeCookie"</span>]();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x35976e();</span><br><span class="line">&#125;)(_0x26da, <span class="number">0x140</span>);</span><br><span class="line"><span class="keyword">var</span> _0x4391 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x1b42d8, _0x57edc8</span>) </span>&#123;</span><br><span class="line">  _0x1b42d8 = _0x1b42d8 - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x2fbeca = _0x26da[_0x1b42d8];</span><br><span class="line">  <span class="keyword">return</span> _0x2fbeca;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> _0x197926 = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x10598f = !![];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">_0xffa3b3, _0x7a40f9</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x48e571 = _0x10598f</span><br><span class="line">      ? <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (_0x7a40f9) &#123;</span><br><span class="line">            <span class="keyword">var</span> _0x2194b5 = _0x7a40f9[<span class="string">"apply"</span>](_0xffa3b3, <span class="built_in">arguments</span>);</span><br><span class="line">            _0x7a40f9 = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> _0x2194b5;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    _0x10598f = ![];</span><br><span class="line">    <span class="keyword">return</span> _0x48e571;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> _0x2c6fd7 = _0x197926(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x4828bb = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"\x64\x65\x76"</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    _0x35c3bc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">"\x77\x69\x6e\x64\x6f\x77"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x456070 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x4576a4 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(</span><br><span class="line">      <span class="string">"\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d"</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> !_0x4576a4[<span class="string">"\x74\x65\x73\x74"</span>](</span><br><span class="line">      _0x4828bb[<span class="string">"\x74\x6f\x53\x74\x72\x69\x6e\x67"</span>]()</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x3fde69 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0xabb6f4 = <span class="keyword">new</span> <span class="built_in">RegExp</span>(</span><br><span class="line">      <span class="string">"\x28\x5c\x5c\x5b\x78\x7c\x75\x5d\x28\x5c\x77\x29\x7b\x32\x2c\x34\x7d\x29\x2b"</span></span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> _0xabb6f4[<span class="string">"\x74\x65\x73\x74"</span>](</span><br><span class="line">      _0x35c3bc[<span class="string">"\x74\x6f\x53\x74\x72\x69\x6e\x67"</span>]()</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x2d9a50 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x58fdb4</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x2a6361 = ~<span class="number">-0x1</span> &gt;&gt; (<span class="number">0x1</span> + (<span class="number">0xff</span> % <span class="number">0x0</span>));</span><br><span class="line">    <span class="keyword">if</span> (_0x58fdb4[<span class="string">"\x69\x6e\x64\x65\x78\x4f\x66"</span>](<span class="string">"\x69"</span> === _0x2a6361)) &#123;</span><br><span class="line">      _0xc388c5(_0x58fdb4);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0xc388c5 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x2073d6</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x6bb49f = ~<span class="number">-0x4</span> &gt;&gt; (<span class="number">0x1</span> + (<span class="number">0xff</span> % <span class="number">0x0</span>));</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      _0x2073d6[<span class="string">"\x69\x6e\x64\x65\x78\x4f\x66"</span>]((!![] + <span class="string">""</span>)[<span class="number">0x3</span>]) !== _0x6bb49f</span><br><span class="line">    ) &#123;</span><br><span class="line">      _0x2d9a50(_0x2073d6);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">if</span> (!_0x456070()) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!_0x3fde69()) &#123;</span><br><span class="line">      _0x2d9a50(<span class="string">"\x69\x6e\x64\u0435\x78\x4f\x66"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      _0x2d9a50(<span class="string">"\x69\x6e\x64\x65\x78\x4f\x66"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    _0x2d9a50(<span class="string">"\x69\x6e\x64\u0435\x78\x4f\x66"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">_0x2c6fd7();</span><br><span class="line"><span class="built_in">console</span>[_0x4391(<span class="string">"0x0"</span>)](_0x4391(<span class="string">"0x1"</span>));</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>如果我们将上述代码放到控制台，它的执行结果和之前是一模一样的，没有任何问题。</p>
                <p>如果我们将其进行格式化，然后贴到到浏览器控制台里面，浏览器会直接卡死无法运行。这样如果有人对代码进行了格式化，就无法正常对代码进行运行和调试，从而起到了保护作用。</p>
                <h3 id="控制流平坦化"><a href="#控制流平坦化" class="headerlink" title="控制流平坦化"></a>控制流平坦化</h3>
                <p>控制流平坦化其实就是将代码的执行逻辑混淆，使其变得复杂难读。其基本思想是将一些逻辑处理块都统一加上一个前驱逻辑块，每个逻辑块都由前驱逻辑块进行条件判断和分发，构成一个个闭环逻辑，导致整个执行逻辑十分复杂难读。</p>
                <p>比如说这里有一段示例代码：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="built_in">console</span>.log(c);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="built_in">console</span>.log(b);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>代码逻辑一目了然，依次在控制台输出了 c、a、b 三个变量的值，但如果把这段代码进行控制流平坦化处理后，代码就会变成这样：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> s = <span class="string">"3|1|2"</span>.split(<span class="string">"|"</span>);</span><br><span class="line"><span class="keyword">let</span> x = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (s[x++]) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"1"</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(a);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"2"</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(b);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"3"</span>:</span><br><span class="line">      <span class="built_in">console</span>.log(c);</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，混淆后的代码首先声明了一个变量 s，它的结果是一个列表，其实是 <code>[&quot;3&quot;, &quot;1&quot;, &quot;2&quot;]</code>，然后下面通过 switch 语句对 s 中的元素进行了判断，每个 case 都加上了各自的代码逻辑。通过这样的处理，一些连续的执行逻辑就被打破了，代码被修改为一个 switch 语句，原本我们可以一眼看出的逻辑是控制台先输出 c，然后才是 a、b，但是现在我们必须要结合 switch 的判断条件和对应 case 的内容进行判断，我们很难再一眼每条语句的执行顺序了，这就大大降低了代码的可读性。</p>
                <p>在 javascript-obfuscator 中我们通过 controlFlowFlattening 变量可以控制是否开启控制流平坦化，示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">  controlFlowFlattening: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>使用控制流平坦化可以使得执行逻辑更加复杂难读，目前非常多的前端混淆都会加上这个选项。但启用控制流平坦化之后，代码的执行时间会变长，最长达 1.5 倍之多。</p>
                <p>另外我们还能使用 controlFlowFlatteningThreshold 这个参数来控制比例，取值范围是 0 到 1，默认 0.75，如果设置为 0，那相当于 controlFlowFlattening 设置为 false，即不开启控制流扁平化 。</p>
                <h3 id="无用代码注入"><a href="#无用代码注入" class="headerlink" title="无用代码注入"></a>无用代码注入</h3>
                <p>无用代码即不会被执行的代码或对上下文没有任何影响的代码，注入之后可以对现有的 JavaScript 代码的阅读形成干扰。我们可以使用 deadCodeInjection 参数开启这个选项，默认为 false。</p>
                <p>比如这里有一段代码：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> a = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hello world"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"nice to meet you"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a();</span><br><span class="line">b();</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这里就声明了方法 a 和 b，然后依次进行调用，分别输出两句话。</p>
                <p>但经过无用代码注入处理之后，代码就会变成类似这样的结果：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> _0x16c18d = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!![[]]) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hello world"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"this"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"is"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"dead"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"code"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> _0x1f7292 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"xmv2nOdfy2N"</span>.charAt(<span class="number">4</span>) !== <span class="built_in">String</span>.fromCharCode(<span class="number">110</span>)) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"this"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"is"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"dead"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"code"</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"nice to meet you"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">_0x16c18d();</span><br><span class="line">_0x1f7292();</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，每个方法内部都增加了额外的 if else 语句，其中 if 的判断条件还是一个表达式，其结果是 true 还是 false 我们还不太一眼能看出来，比如说 <code>_0x1f7292</code> 这个方法，它的 if 判断条件是：</p>
                <figure class="highlight reasonml">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="string">"xmv2nOdfy2N"</span>.<span class="built_in">char</span><span class="constructor">At(4)</span> !== <span class="module-access"><span class="module"><span class="identifier">String</span>.</span></span>from<span class="constructor">CharCode(110)</span></span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>在不等号前面其实是从字符串中取出指定位置的字符，不等号后面则调用了 fromCharCode 方法来根据 ascii 码转换得到一个字符，然后比较两个字符的结果是否是不一样的。前者经过我们推算可以知道结果是 n，但对于后者，多数情况下我们还得去查一下 ascii 码表才能知道其结果也是 n，最后两个结果是相同的，所以整个表达式的结果是 false，所以 if 后面跟的逻辑实际上就是不会被执行到的无用代码，但这些代码对我们阅读代码起到了一定的干扰作用。</p>
                <p>因此，这种混淆方式通过混入一些特殊的判断条件并加入一些不会被执行的代码，可以对代码起到一定的混淆干扰作用。</p>
                <p>在 javascript-obfuscator 中，我们可以通过 deadCodeInjection 参数控制无用代码的注入，配置如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">  deadCodeInjection: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>另外我们还可以通过设置 deadCodeInjectionThreshold 参数来控制无用代码注入的比例，取值 0 到 1，默认是 0.4。</p>
                <h3 id="对象键名替换"><a href="#对象键名替换" class="headerlink" title="对象键名替换"></a>对象键名替换</h3>
                <p>如果是一个对象，可以使用 transformObjectKeys 来对对象的键值进行替换，示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">(function()&#123;</span></span><br><span class="line"><span class="string">    var object = &#123;</span></span><br><span class="line"><span class="string">        foo: 'test1',</span></span><br><span class="line"><span class="string">        bar: &#123;</span></span><br><span class="line"><span class="string">            baz: 'test2'</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">&#125;)(); </span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  compact: <span class="literal">false</span>,</span><br><span class="line">  transformObjectKeys: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>输出结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x7a5d = [<span class="string">"bar"</span>, <span class="string">"test2"</span>, <span class="string">"test1"</span>];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x59fec5, _0x2e4fac</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x231e7a = <span class="function"><span class="keyword">function</span> (<span class="params">_0x46f33e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x46f33e) &#123;</span><br><span class="line">      _0x59fec5[<span class="string">"push"</span>](_0x59fec5[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x231e7a(++_0x2e4fac);</span><br><span class="line">&#125;)(_0x7a5d, <span class="number">0x167</span>);</span><br><span class="line"><span class="keyword">var</span> _0x3bc4 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x309ad3, _0x22d5ac</span>) </span>&#123;</span><br><span class="line">  _0x309ad3 = _0x309ad3 - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x3a034e = _0x7a5d[_0x309ad3];</span><br><span class="line">  <span class="keyword">return</span> _0x3a034e;</span><br><span class="line">&#125;;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x9f1fd1 = &#123;&#125;;</span><br><span class="line">  _0x9f1fd1[<span class="string">"foo"</span>] = _0x3bc4(<span class="string">"0x0"</span>);</span><br><span class="line">  _0x9f1fd1[_0x3bc4(<span class="string">"0x1"</span>)] = &#123;&#125;;</span><br><span class="line">  _0x9f1fd1[_0x3bc4(<span class="string">"0x1"</span>)][<span class="string">"baz"</span>] = _0x3bc4(<span class="string">"0x2"</span>);</span><br><span class="line">&#125;)();</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，Object 的变量名被替换为了特殊的变量，使得可读性变差，这样我们就不好直接通过变量名进行搜寻了，这也可以起到一定的防护作用。</p>
                <h3 id="禁用控制台输出"><a href="#禁用控制台输出" class="headerlink" title="禁用控制台输出"></a>禁用控制台输出</h3>
                <p>可以使用 disableConsoleOutput 来禁用掉 console.log 输出功能，加大调试难度，示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">console.log('hello world')</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  disableConsoleOutput: <span class="literal">true</span>,</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>运行结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x3a39 = [</span><br><span class="line">  <span class="string">"debug"</span>,</span><br><span class="line">  <span class="string">"info"</span>,</span><br><span class="line">  <span class="string">"error"</span>,</span><br><span class="line">  <span class="string">"exception"</span>,</span><br><span class="line">  <span class="string">"trace"</span>,</span><br><span class="line">  <span class="string">"hello\x20world"</span>,</span><br><span class="line">  <span class="string">"apply"</span>,</span><br><span class="line">  <span class="string">"&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)"</span>,</span><br><span class="line">  <span class="string">"console"</span>,</span><br><span class="line">  <span class="string">"log"</span>,</span><br><span class="line">  <span class="string">"warn"</span>,</span><br><span class="line">];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x2a157a, _0x5d9d3b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x488e2c = <span class="function"><span class="keyword">function</span> (<span class="params">_0x5bcb73</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x5bcb73) &#123;</span><br><span class="line">      _0x2a157a[<span class="string">"push"</span>](_0x2a157a[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x488e2c(++_0x5d9d3b);</span><br><span class="line">&#125;)(_0x3a39, <span class="number">0x10e</span>);</span><br><span class="line"><span class="keyword">var</span> _0x5bff = <span class="function"><span class="keyword">function</span> (<span class="params">_0x43bdfc, _0x52e4c6</span>) </span>&#123;</span><br><span class="line">  _0x43bdfc = _0x43bdfc - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0xb67384 = _0x3a39[_0x43bdfc];</span><br><span class="line">  <span class="keyword">return</span> _0xb67384;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> _0x349b01 = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x1f484b = !![];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">_0x5efe0d, _0x33db62</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x20bcd2 = _0x1f484b</span><br><span class="line">      ? <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (_0x33db62) &#123;</span><br><span class="line">            <span class="keyword">var</span> _0x77054c = _0x33db62[_0x5bff(<span class="string">"0x0"</span>)](_0x5efe0d, <span class="built_in">arguments</span>);</span><br><span class="line">            _0x33db62 = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> _0x77054c;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    _0x1f484b = ![];</span><br><span class="line">    <span class="keyword">return</span> _0x20bcd2;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> _0x19f538 = _0x349b01(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x7ab6e4 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x157bff;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> _0x5e672c = <span class="built_in">Function</span>(</span><br><span class="line">      <span class="string">"return\x20(function()\x20"</span> + _0x5bff(<span class="string">"0x1"</span>) + <span class="string">");"</span></span><br><span class="line">    );</span><br><span class="line">    _0x157bff = _0x5e672c();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (_0x11028d) &#123;</span><br><span class="line">    _0x157bff = <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!_0x157bff[_0x5bff(<span class="string">"0x2"</span>)]) &#123;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)] = (<span class="function"><span class="keyword">function</span> (<span class="params">_0x7ab6e4</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> _0x5a8d9e = &#123;&#125;;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x3"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x4"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x5"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x6"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x7"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x8"</span>)] = _0x7ab6e4;</span><br><span class="line">      _0x5a8d9e[_0x5bff(<span class="string">"0x9"</span>)] = _0x7ab6e4;</span><br><span class="line">      <span class="keyword">return</span> _0x5a8d9e;</span><br><span class="line">    &#125;)(_0x7ab6e4);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x3"</span>)] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x4"</span>)] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][<span class="string">"debug"</span>] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x6"</span>)] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x7"</span>)] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x8"</span>)] = _0x7ab6e4;</span><br><span class="line">    _0x157bff[_0x5bff(<span class="string">"0x2"</span>)][_0x5bff(<span class="string">"0x9"</span>)] = _0x7ab6e4;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">_0x19f538();</span><br><span class="line"><span class="built_in">console</span>[_0x5bff(<span class="string">"0x3"</span>)](_0x5bff(<span class="string">"0xa"</span>));</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>此时，我们如果执行这个代码，发现是没有任何输出的，这里实际上就是将 console 的一些功能禁用了。</p>
                <h3 id="调试保护"><a href="#调试保护" class="headerlink" title="调试保护"></a>调试保护</h3>
                <p>我们知道，在 JavaScript 代码中如果加入 debugger 这个关键字，那么在执行到该位置的时候控制它就会进入断点调试模式。如果在代码多个位置都加入 debugger 这个关键字，或者定义某个逻辑来反复执行 debugger，那就会不断进入断点调试模式，原本的代码无法就无法顺畅地执行了。这个过程可以称为调试保护，即通过反复执行 debugger 来使得原来的代码无法顺畅执行。</p>
                <p>其效果类似于执行了如下代码：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">debugger</span>;</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>如果我们把这段代码粘贴到控制台，它就会反复地执行 debugger 语句进入断点调试模式，从而干扰正常的调试流程。</p>
                <p>在 javascript-obfuscator 中可以使用 debugProtection 来启用调试保护机制，还可以使用 debugProtectionInterval 来启用无限 Debug ，使得代码在调试过程中会不断进入断点模式，无法顺畅执行，配置如下：</p>
                <figure class="highlight yaml">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="string">const</span> <span class="string">options</span> <span class="string">=</span> <span class="string">&#123;</span></span><br><span class="line">  <span class="attr">debugProtection:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line">  <span class="attr">debugProtectionInterval:</span> <span class="literal">true</span><span class="string">,</span></span><br><span class="line"><span class="string">&#125;;</span></span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>混淆后的代码会不断跳到 debugger 代码的位置，使得整个代码无法顺畅执行，对 JavaScript 代码的调试形成一定的干扰。</p>
                <h3 id="域名锁定"><a href="#域名锁定" class="headerlink" title="域名锁定"></a>域名锁定</h3>
                <p>我们还可以通过控制 domainLock 来控制 JavaScript 代码只能在特定域名下运行，这样就可以降低代码被模拟或盗用的风险。</p>
                <p>示例如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">const</span> code = <span class="string">`</span></span><br><span class="line"><span class="string">console.log('hello world')</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"><span class="keyword">const</span> options = &#123;</span><br><span class="line">  domainLock: [<span class="string">"cuiqingcai.com"</span>],</span><br><span class="line">&#125;;</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这里我们使用了 domainLock 指定了一个域名叫做 cuiqingcai.com，也就是设置了一个域名白名单，混淆后的代码结果如下：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="keyword">var</span> _0x3203 = [</span><br><span class="line">  <span class="string">"apply"</span>,</span><br><span class="line">  <span class="string">"return\x20(function()\x20"</span>,</span><br><span class="line">  <span class="string">"&#123;&#125;.constructor(\x22return\x20this\x22)(\x20)"</span>,</span><br><span class="line">  <span class="string">"item"</span>,</span><br><span class="line">  <span class="string">"attribute"</span>,</span><br><span class="line">  <span class="string">"value"</span>,</span><br><span class="line">  <span class="string">"replace"</span>,</span><br><span class="line">  <span class="string">"length"</span>,</span><br><span class="line">  <span class="string">"charCodeAt"</span>,</span><br><span class="line">  <span class="string">"log"</span>,</span><br><span class="line">  <span class="string">"hello\x20world"</span>,</span><br><span class="line">];</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">_0x2ed22c, _0x3ad370</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x49dc54 = <span class="function"><span class="keyword">function</span> (<span class="params">_0x53a786</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (--_0x53a786) &#123;</span><br><span class="line">      _0x2ed22c[<span class="string">"push"</span>](_0x2ed22c[<span class="string">"shift"</span>]());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  _0x49dc54(++_0x3ad370);</span><br><span class="line">&#125;)(_0x3203, <span class="number">0x155</span>);</span><br><span class="line"><span class="keyword">var</span> _0x5b38 = <span class="function"><span class="keyword">function</span> (<span class="params">_0xd7780b, _0x19c0f2</span>) </span>&#123;</span><br><span class="line">  _0xd7780b = _0xd7780b - <span class="number">0x0</span>;</span><br><span class="line">  <span class="keyword">var</span> _0x2d2f44 = _0x3203[_0xd7780b];</span><br><span class="line">  <span class="keyword">return</span> _0x2d2f44;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> _0x485919 = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x5cf798 = !![];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">_0xd1fa29, _0x2ed646</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _0x56abf = _0x5cf798</span><br><span class="line">      ? <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (_0x2ed646) &#123;</span><br><span class="line">            <span class="keyword">var</span> _0x33af63 = _0x2ed646[_0x5b38(<span class="string">"0x0"</span>)](_0xd1fa29, <span class="built_in">arguments</span>);</span><br><span class="line">            _0x2ed646 = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> _0x33af63;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      : <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    _0x5cf798 = ![];</span><br><span class="line">    <span class="keyword">return</span> _0x56abf;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> _0x67dcc8 = _0x485919(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> _0x276a31;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> _0x5c8be2 = <span class="built_in">Function</span>(_0x5b38(<span class="string">"0x1"</span>) + _0x5b38(<span class="string">"0x2"</span>) + <span class="string">");"</span>);</span><br><span class="line">    _0x276a31 = _0x5c8be2();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (_0x5f1c00) &#123;</span><br><span class="line">    _0x276a31 = <span class="built_in">window</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _0x254a0d = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      key: _0x5b38(<span class="string">"0x3"</span>),</span><br><span class="line">      value: _0x5b38(<span class="string">"0x4"</span>),</span><br><span class="line">      getAttribute: (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> _0x5cc3c7 = <span class="number">0x0</span>; _0x5cc3c7 &lt; <span class="number">0x3e8</span>; _0x5cc3c7--) &#123;</span><br><span class="line">          <span class="keyword">var</span> _0x35b30b = _0x5cc3c7 &gt; <span class="number">0x0</span>;</span><br><span class="line">          <span class="keyword">switch</span> (_0x35b30b) &#123;</span><br><span class="line">            <span class="keyword">case</span> !![]:</span><br><span class="line">              <span class="keyword">return</span> (</span><br><span class="line">                <span class="keyword">this</span>[_0x5b38(<span class="string">"0x3"</span>)] +</span><br><span class="line">                <span class="string">"_"</span> +</span><br><span class="line">                <span class="keyword">this</span>[_0x5b38(<span class="string">"0x5"</span>)] +</span><br><span class="line">                <span class="string">"_"</span> +</span><br><span class="line">                _0x5cc3c7</span><br><span class="line">              );</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">              <span class="keyword">this</span>[_0x5b38(<span class="string">"0x3"</span>)] + <span class="string">"_"</span> + <span class="keyword">this</span>[_0x5b38(<span class="string">"0x5"</span>)];</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)(),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">var</span> _0x3b375a = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"[QLCIKYkCFzdWpzRAXMhxJOYpTpYWJHPll]"</span>, <span class="string">"g"</span>);</span><br><span class="line">  <span class="keyword">var</span> _0x5a94d2 = <span class="string">"cuQLiqiCInKYkgCFzdWcpzRAaXMi.hcoxmJOYpTpYWJHPll"</span></span><br><span class="line">    [_0x5b38(<span class="string">"0x6"</span>)](_0x3b375a, <span class="string">""</span>)</span><br><span class="line">    [<span class="string">"split"</span>](<span class="string">";"</span>);</span><br><span class="line">  <span class="keyword">var</span> _0x5c0da2;</span><br><span class="line">  <span class="keyword">var</span> _0x19ad5d;</span><br><span class="line">  <span class="keyword">var</span> _0x5992ca;</span><br><span class="line">  <span class="keyword">var</span> _0x40bd39;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> _0x5cad1 <span class="keyword">in</span> _0x276a31) &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      _0x5cad1[_0x5b38(<span class="string">"0x7"</span>)] == <span class="number">0x8</span> &amp;&amp;</span><br><span class="line">      _0x5cad1[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x7</span>) == <span class="number">0x74</span> &amp;&amp;</span><br><span class="line">      _0x5cad1[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x5</span>) == <span class="number">0x65</span> &amp;&amp;</span><br><span class="line">      _0x5cad1[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x3</span>) == <span class="number">0x75</span> &amp;&amp;</span><br><span class="line">      _0x5cad1[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x0</span>) == <span class="number">0x64</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      _0x5c0da2 = _0x5cad1;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> _0x29551 <span class="keyword">in</span> _0x276a31[_0x5c0da2]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      _0x29551[_0x5b38(<span class="string">"0x7"</span>)] == <span class="number">0x6</span> &amp;&amp;</span><br><span class="line">      _0x29551[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x5</span>) == <span class="number">0x6e</span> &amp;&amp;</span><br><span class="line">      _0x29551[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x0</span>) == <span class="number">0x64</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      _0x19ad5d = _0x29551;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!(<span class="string">"~"</span> &gt; _0x19ad5d)) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> _0x2b71bd <span class="keyword">in</span> _0x276a31[_0x5c0da2]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        _0x2b71bd[_0x5b38(<span class="string">"0x7"</span>)] == <span class="number">0x8</span> &amp;&amp;</span><br><span class="line">        _0x2b71bd[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x7</span>) == <span class="number">0x6e</span> &amp;&amp;</span><br><span class="line">        _0x2b71bd[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x0</span>) == <span class="number">0x6c</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        _0x5992ca = _0x2b71bd;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> _0x397f55 <span class="keyword">in</span> _0x276a31[_0x5c0da2][_0x5992ca]) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        _0x397f55[<span class="string">"length"</span>] == <span class="number">0x8</span> &amp;&amp;</span><br><span class="line">        _0x397f55[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x7</span>) == <span class="number">0x65</span> &amp;&amp;</span><br><span class="line">        _0x397f55[_0x5b38(<span class="string">"0x8"</span>)](<span class="number">0x0</span>) == <span class="number">0x68</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        _0x40bd39 = _0x397f55;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!_0x5c0da2 || !_0x276a31[_0x5c0da2]) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _0x5f19be = _0x276a31[_0x5c0da2][_0x19ad5d];</span><br><span class="line">  <span class="keyword">var</span> _0x674f76 =</span><br><span class="line">    !!_0x276a31[_0x5c0da2][_0x5992ca] &amp;&amp;</span><br><span class="line">    _0x276a31[_0x5c0da2][_0x5992ca][_0x40bd39];</span><br><span class="line">  <span class="keyword">var</span> _0x5e1b34 = _0x5f19be || _0x674f76;</span><br><span class="line">  <span class="keyword">if</span> (!_0x5e1b34) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> _0x593394 = ![];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> _0x479239 = <span class="number">0x0</span>; _0x479239 &lt; _0x5a94d2[<span class="string">"length"</span>]; _0x479239++) &#123;</span><br><span class="line">    <span class="keyword">var</span> _0x19ad5d = _0x5a94d2[_0x479239];</span><br><span class="line">    <span class="keyword">var</span> _0x112c24 = _0x5e1b34[<span class="string">"length"</span>] - _0x19ad5d[<span class="string">"length"</span>];</span><br><span class="line">    <span class="keyword">var</span> _0x51731c = _0x5e1b34[<span class="string">"indexOf"</span>](_0x19ad5d, _0x112c24);</span><br><span class="line">    <span class="keyword">var</span> _0x173191 = _0x51731c !== <span class="number">-0x1</span> &amp;&amp; _0x51731c === _0x112c24;</span><br><span class="line">    <span class="keyword">if</span> (_0x173191) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        _0x5e1b34[<span class="string">"length"</span>] == _0x19ad5d[_0x5b38(<span class="string">"0x7"</span>)] ||</span><br><span class="line">        _0x19ad5d[<span class="string">"indexOf"</span>](<span class="string">"."</span>) === <span class="number">0x0</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        _0x593394 = !![];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (!_0x593394) &#123;</span><br><span class="line">    data;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  _0x254a0d();</span><br><span class="line">&#125;);</span><br><span class="line">_0x67dcc8();</span><br><span class="line"><span class="built_in">console</span>[_0x5b38(<span class="string">"0x9"</span>)](_0x5b38(<span class="string">"0xa"</span>));</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这段代码就只能在指定域名 cuiqingcai.com 下运行，不能在其他网站运行。这样的话，如果一些相关 JavaScript 代码被单独剥离出来，想在其他网站运行或者使用程序模拟运行的话，运行结果只有是失败，这样就可以有效降低被代码被模拟或盗用的风险。</p>
                <h3 id="特殊编码"><a href="#特殊编码" class="headerlink" title="特殊编码"></a>特殊编码</h3>
                <p>另外还有一些特殊的工具包，如使用 aaencode、jjencode、jsfuck 等工具对代码进行混淆和编码。</p>
                <p>示例如下：</p>
                <figure class="highlight stylus">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="selector-tag">var</span> <span class="selector-tag">a</span> = <span class="number">1</span></span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>jsfuck 的结果：</p>
                <figure class="highlight markdown">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">[<span class="string"></span>][<span class="symbol">(![</span>]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]][<span class="string">([</span>]+&#123;&#125;)[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">+!![</span>]]+(![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">+[</span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]]([<span class="string"></span>][<span class="symbol">(![</span>]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]][<span class="string">([</span>]+&#123;&#125;)[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+([][[]]+[])[+!![]]+</span><br><span class="line">...</span><br><span class="line">([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]]((!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">+[</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+!![</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">+!![</span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+(![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+(+&#123;&#125;+[<span class="string"></span>])[<span class="string">+!![</span>]]+(!![<span class="string"></span>]+[<span class="string"></span>])[<span class="string">+[</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>]+&#123;&#125;)[<span class="string">+!![</span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">+!![</span>]])(!+[<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]))[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]]+([<span class="string"></span>][<span class="symbol">[</span>]]+[<span class="string"></span>])[<span class="string">!+[</span>]+!![<span class="string"></span>]+!![<span class="string"></span>]])(!+[<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>])(([<span class="string"></span>]+&#123;&#125;)[<span class="string">+[</span>]])[<span class="string">+[</span>]]+(!+[<span class="string"></span>]+!![<span class="string"></span>]+!![<span class="string"></span>]+[<span class="string"></span>])+([][[]]+[])[!+[]+!![]])+([]+&#123;&#125;)[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(+!![]+[]))(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+!![])</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>aaencode 的结果：</p>
                <figure class="highlight gcode">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">ﾟωﾟﾉ= /｀ｍ´）ﾉ ~┻━┻   / [<span class="string">'_'</span>]; o=<span class="comment">(ﾟｰﾟ)</span>  =_=<span class="number">3</span>; c=<span class="comment">(ﾟΘﾟ)</span> =<span class="comment">(ﾟｰﾟ)</span>-<span class="comment">(ﾟｰﾟ)</span>; <span class="comment">(ﾟДﾟ)</span> =<span class="comment">(ﾟΘﾟ)</span>= <span class="comment">(o^_^o)</span>/ <span class="comment">(o^_^o)</span>;<span class="comment">(ﾟДﾟ)</span>=&#123;ﾟΘﾟ: <span class="string">'_'</span> ,ﾟωﾟﾉ : <span class="comment">((ﾟωﾟﾉ==3)</span> +<span class="string">'_'</span>) [ﾟΘﾟ] ,ﾟｰﾟﾉ :<span class="comment">(ﾟωﾟﾉ+ '_')</span>[o^_^o -<span class="comment">(ﾟΘﾟ)</span>] ,ﾟДﾟﾉ:<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>)[ﾟｰﾟ] &#125;; <span class="comment">(ﾟДﾟ)</span> [ﾟΘﾟ] =<span class="comment">((ﾟωﾟﾉ==3)</span> +<span class="string">'_'</span>) [c^_^o];<span class="comment">(ﾟДﾟ)</span> [<span class="string">'c'</span>] = <span class="comment">((ﾟДﾟ)</span>+<span class="string">'_'</span>) [ <span class="comment">(ﾟｰﾟ)</span>+<span class="comment">(ﾟｰﾟ)</span>-<span class="comment">(ﾟΘﾟ)</span> ];<span class="comment">(ﾟДﾟ)</span> [<span class="string">'o'</span>] = <span class="comment">((ﾟДﾟ)</span>+<span class="string">'_'</span>) [ﾟΘﾟ];<span class="comment">(ﾟoﾟ)</span>=<span class="comment">(ﾟДﾟ)</span> [<span class="string">'c'</span>]+<span class="comment">(ﾟДﾟ)</span> [<span class="string">'o'</span>]+<span class="comment">(ﾟωﾟﾉ +'_')</span>[ﾟΘﾟ]+ <span class="comment">((ﾟωﾟﾉ==3)</span> +<span class="string">'_'</span>) [ﾟｰﾟ] + <span class="comment">((ﾟДﾟ)</span> +<span class="string">'_'</span>) [<span class="comment">(ﾟｰﾟ)</span>+<span class="comment">(ﾟｰﾟ)</span>]+ <span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [ﾟΘﾟ]+<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [<span class="comment">(ﾟｰﾟ)</span> - <span class="comment">(ﾟΘﾟ)</span>]+<span class="comment">(ﾟДﾟ)</span> [<span class="string">'c'</span>]+<span class="comment">((ﾟДﾟ)</span>+<span class="string">'_'</span>) [<span class="comment">(ﾟｰﾟ)</span>+<span class="comment">(ﾟｰﾟ)</span>]+ <span class="comment">(ﾟДﾟ)</span> [<span class="string">'o'</span>]+<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [ﾟΘﾟ];<span class="comment">(ﾟДﾟ)</span> [<span class="string">'_'</span>] =<span class="comment">(o^_^o)</span> [ﾟoﾟ] [ﾟoﾟ];<span class="comment">(ﾟεﾟ)</span>=<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [ﾟΘﾟ]+ <span class="comment">(ﾟДﾟ)</span> .ﾟДﾟﾉ+<span class="comment">((ﾟДﾟ)</span>+<span class="string">'_'</span>) [<span class="comment">(ﾟｰﾟ)</span> + <span class="comment">(ﾟｰﾟ)</span>]+<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [o^_^o -ﾟΘﾟ]+<span class="comment">((ﾟｰﾟ==3)</span> +<span class="string">'_'</span>) [ﾟΘﾟ]+ <span class="comment">(ﾟωﾟﾉ +'_')</span> [ﾟΘﾟ]; <span class="comment">(ﾟｰﾟ)</span>+=<span class="comment">(ﾟΘﾟ)</span>; <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]=<span class="string">'\\'</span>; <span class="comment">(ﾟДﾟ)</span>.ﾟΘﾟﾉ=<span class="comment">(ﾟДﾟ+ ﾟｰﾟ)</span>[o^_^o -<span class="comment">(ﾟΘﾟ)</span>];<span class="comment">(oﾟｰﾟo)</span>=<span class="comment">(ﾟωﾟﾉ +'_')</span>[c^_^o];<span class="comment">(ﾟДﾟ)</span> [ﾟoﾟ]=<span class="string">'\"'</span>;<span class="comment">(ﾟДﾟ)</span> [<span class="string">'_'</span>] <span class="comment">( (ﾟДﾟ)</span> [<span class="string">'_'</span>] <span class="comment">(ﾟεﾟ+(ﾟДﾟ)</span>[ﾟoﾟ]+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">((o^_^o)</span> +<span class="comment">(o^_^o)</span>)+ <span class="comment">((o^_^o)</span> +<span class="comment">(o^_^o)</span>)+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">(ﾟｰﾟ)</span>+ <span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">((o^_^o)</span> +<span class="comment">(o^_^o)</span>)+ <span class="comment">((o^_^o)</span> - <span class="comment">(ﾟΘﾟ)</span>)+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟｰﾟ)</span>+ <span class="comment">(c^_^o)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">(ﾟｰﾟ)</span>+ <span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟｰﾟ)</span>+ <span class="comment">(c^_^o)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">((ﾟｰﾟ)</span> + <span class="comment">(o^_^o)</span>)+ <span class="comment">((ﾟｰﾟ)</span> + <span class="comment">(ﾟΘﾟ)</span>)+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">(ﾟｰﾟ)</span>+ <span class="comment">(c^_^o)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">((o^_^o)</span> +<span class="comment">(o^_^o)</span>)+ <span class="comment">(ﾟΘﾟ)</span>+ <span class="comment">(ﾟДﾟ)</span>[ﾟoﾟ])<span class="comment">(ﾟΘﾟ)</span>)<span class="comment">((ﾟΘﾟ)</span>+<span class="comment">(ﾟДﾟ)</span>[ﾟεﾟ]+<span class="comment">((ﾟｰﾟ)</span>+<span class="comment">(ﾟΘﾟ)</span>)+<span class="comment">(ﾟΘﾟ)</span>+<span class="comment">(ﾟДﾟ)</span>[ﾟoﾟ]);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>jjencode 的结果：</p>
                <figure class="highlight powershell">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="variable">$</span>=~[];<span class="variable">$</span>=&#123;___:++<span class="variable">$</span>,<span class="variable">$</span><span class="variable">$</span><span class="variable">$</span><span class="variable">$</span>:(![]+<span class="string">""</span>)[<span class="variable">$</span>],__<span class="variable">$</span>:++<span class="variable">$</span>,<span class="variable">$_</span><span class="variable">$_:</span>(![]+<span class="string">""</span>)[<span class="variable">$</span>],_<span class="variable">$_:</span>++<span class="variable">$</span>,<span class="variable">$_</span><span class="variable">$</span><span class="variable">$</span>:(&#123;&#125;+<span class="string">""</span>)[<span class="variable">$</span>],<span class="variable">$</span><span class="variable">$_</span><span class="variable">$</span>:(<span class="variable">$</span>[<span class="variable">$</span>]+<span class="string">""</span>)[<span class="variable">$</span>],_<span class="variable">$</span><span class="variable">$</span>:++<span class="variable">$</span>,<span class="variable">$</span><span class="variable">$</span><span class="variable">$_:</span>(!<span class="string">""</span>+<span class="string">""</span>)[<span class="variable">$</span>],<span class="variable">$__:</span>++<span class="variable">$</span>,<span class="variable">$_</span><span class="variable">$</span>:++<span class="variable">$</span>,<span class="variable">$</span><span class="variable">$__:</span>(&#123;&#125;+<span class="string">""</span>)[<span class="variable">$</span>],<span class="variable">$</span><span class="variable">$_:</span>++<span class="variable">$</span>,<span class="variable">$</span><span class="variable">$</span><span class="variable">$</span>:++<span class="variable">$</span>,<span class="variable">$___:</span>++<span class="variable">$</span>,<span class="variable">$__</span><span class="variable">$</span>:++<span class="variable">$</span>&#125;;<span class="variable">$</span>.<span class="variable">$_</span>=(<span class="variable">$</span>.<span class="variable">$_</span>=<span class="variable">$</span>+<span class="string">""</span>)[<span class="variable">$</span><span class="type">.</span><span class="variable">$_</span><span class="variable">$</span>]+(<span class="variable">$</span>._<span class="variable">$</span>=<span class="variable">$</span>.<span class="variable">$_</span>[<span class="variable">$</span><span class="type">.__</span><span class="variable">$</span>])+(<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$</span>=(<span class="variable">$</span>.<span class="variable">$</span>+<span class="string">""</span>)[<span class="variable">$</span><span class="type">.__</span><span class="variable">$</span>])+((!<span class="variable">$</span>)+<span class="string">""</span>)[<span class="variable">$</span><span class="type">._</span><span class="variable">$</span><span class="variable">$</span>]+(<span class="variable">$</span>.__=<span class="variable">$</span>.<span class="variable">$_</span>[<span class="variable">$</span><span class="type">.</span><span class="variable">$</span><span class="variable">$_</span>])+(<span class="variable">$</span>.<span class="variable">$</span>=(!<span class="string">""</span>+<span class="string">""</span>)[<span class="variable">$</span><span class="type">.__</span><span class="variable">$</span>])+(<span class="variable">$</span>._=(!<span class="string">""</span>+<span class="string">""</span>)[<span class="variable">$</span><span class="type">._</span><span class="variable">$_</span>])+<span class="variable">$</span>.<span class="variable">$_</span>[<span class="variable">$</span><span class="type">.</span><span class="variable">$_</span><span class="variable">$</span>]+<span class="variable">$</span>.__+<span class="variable">$</span>._<span class="variable">$</span>+<span class="variable">$</span>.<span class="variable">$</span>;<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$</span>=<span class="variable">$</span>.<span class="variable">$</span>+(!<span class="string">""</span>+<span class="string">""</span>)[<span class="variable">$</span><span class="type">._</span><span class="variable">$</span><span class="variable">$</span>]+<span class="variable">$</span>.__+<span class="variable">$</span>._+<span class="variable">$</span>.<span class="variable">$</span>+<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$</span>;<span class="variable">$</span>.<span class="variable">$</span>=(<span class="variable">$</span>.___)[<span class="variable">$</span><span class="type">.</span><span class="variable">$_</span>][<span class="variable">$</span><span class="type">.</span><span class="variable">$_</span>];<span class="variable">$</span>.<span class="variable">$</span>(<span class="variable">$</span>.<span class="variable">$</span>(<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$</span>+<span class="string">"\"</span><span class="string">"+"</span>\\<span class="string">"+<span class="variable">$</span>.__<span class="variable">$</span>+<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$_</span>+<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$_</span>+<span class="variable">$</span>.<span class="variable">$_</span><span class="variable">$_</span>+"</span>\\<span class="string">"+<span class="variable">$</span>.__<span class="variable">$</span>+<span class="variable">$</span>.<span class="variable">$</span><span class="variable">$_</span>+<span class="variable">$</span>._<span class="variable">$_</span>+"</span>\\<span class="string">"+<span class="variable">$</span>.<span class="variable">$__</span>+<span class="variable">$</span>.___+<span class="variable">$</span>.<span class="variable">$_</span><span class="variable">$_</span>+"</span>\\<span class="string">"+<span class="variable">$</span>.<span class="variable">$__</span>+<span class="variable">$</span>.___+"</span>=\\<span class="string">"+<span class="variable">$</span>.<span class="variable">$__</span>+<span class="variable">$</span>.___+<span class="variable">$</span>.__<span class="variable">$</span>+"</span>\<span class="string">""</span>)())();</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>可以看到，通过这些工具，原本非常简单的代码被转化为一些几乎完全不可读的代码，但实际上运行效果还是相同的。这些混淆方式比较另类，看起来虽然没有什么头绪，但实际上找到规律是非常好还原的，其没有真正达到强力混淆的效果。</p>
                <p>以上便是对 JavaScript 混淆方式的介绍和总结。总的来说，经过混淆的 JavaScript 代码其可读性大大降低，同时防护效果也大大增强。</p>
                <h2 id="6-WebAssembly"><a href="#6-WebAssembly" class="headerlink" title="6. WebAssembly"></a>6. WebAssembly</h2>
                <p>随着技术的发展，WebAssembly 逐渐流行起来。不同于 JavaScript 混淆技术， WebAssembly 其基本思路是将一些核心逻辑使用其他语言（如 C/C++ 语言）来编写，并编译成类似字节码的文件，并通过 JavaScript 调用执行，从而起到二进制级别的防护作用。</p>
                <p>WebAssembly 是一种可以使用非 JavaScript 编程语言编写代码并且能在浏览器上运行的技术方案，比如借助于我们能将 C/C++ 利用 Emscripten 编译工具转成 wasm 格式的文件， JavaScript 可以直接调用该文件执行其中的方法。</p>
                <p>WebAssembly 是经过编译器编译之后的字节码，可以从 C/C++ 编译而来，得到的字节码具有和 JavaScript 相同的功能，运行速度更快，体积更小，而且在语法上完全脱离 JavaScript，同时具有沙盒化的执行环境。</p>
                <p>比如这就是一个基本的 WebAssembly 示例：</p>
                <figure class="highlight javascript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line">WebAssembly.compile(</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(</span><br><span class="line">    <span class="string">`</span></span><br><span class="line"><span class="string">  00 61 73 6d  01 00 00 00  01 0c 02 60  02 7f 7f 01</span></span><br><span class="line"><span class="string">  7f 60 01 7f  01 7f 03 03  02 00 01 07  10 02 03 61</span></span><br><span class="line"><span class="string">  64 64 00 00  06 73 71 75  61 72 65 00  01 0a 13 02</span></span><br><span class="line"><span class="string">  08 00 20 00  20 01 6a 0f  0b 08 00 20  00 20 00 6c</span></span><br><span class="line"><span class="string">  0f 0b`</span></span><br><span class="line">      .trim()</span><br><span class="line">      .split(<span class="regexp">/[\s\r\n]+/g</span>)</span><br><span class="line">      .map(<span class="function">(<span class="params">str</span>) =&gt;</span> <span class="built_in">parseInt</span>(str, <span class="number">16</span>))</span><br><span class="line">  )</span><br><span class="line">).then(<span class="function">(<span class="params"><span class="built_in">module</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> instance = <span class="keyword">new</span> WebAssembly.Instance(<span class="built_in">module</span>);</span><br><span class="line">  <span class="keyword">const</span> &#123; add, square &#125; = instance.exports;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"2 + 4 ="</span>, add(<span class="number">2</span>, <span class="number">4</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"3^2 ="</span>, square(<span class="number">3</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"(2 + 5)^2 ="</span>, square(add(<span class="number">2</span> + <span class="number">5</span>)));</span><br><span class="line">&#125;);</span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>这里其实是利用 WebAssembly 定义了两个方法，分别是 add 和 square，可以分别用于求和和开平方计算。那这两个方法在哪里声明的呢？其实它们被隐藏在了一个 Uint8Array 里面，仅仅查看明文代码我们确实无从知晓里面究竟定义了什么逻辑，但确实是可以执行的，我们将这段代码输入到浏览器控制台下，运行结果如下：</p>
                <figure class="highlight angelscript">
                  <table>
                    <tr>
                      <td class="gutter">
                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
                      </td>
                      <td class="code">
                        <pre><span class="line"><span class="number">2</span> + <span class="number">4</span> = <span class="number">6</span></span><br><span class="line"><span class="number">3</span>^<span class="number">2</span> = <span class="number">9</span></span><br><span class="line">(<span class="number">2</span> + <span class="number">5</span>)^<span class="number">2</span> = <span class="number">49</span></span><br></pre>
                      </td>
                    </tr>
                  </table>
                </figure>
                <p>由此可见，通过 WebAssembly 我们可以成功将核心逻辑“隐藏”起来，这样某些核心逻辑就不能被轻易找出来了。</p>
                <p>所以，很多网站越来越多使用 WebAssembly 技术来保护一些核心逻辑不被轻易被人识别或破解，可以起到更好的防护效果。</p>
                <h2 id="7-总结"><a href="#7-总结" class="headerlink" title="7. 总结"></a>7. 总结</h2>
                <p>以上，我们就介绍了接口加密技术和 JavaScript 的压缩、混淆技术，也对 WebAssembly 技术有了初步的了解，知己知彼方能百战不殆，了解了原理，我们才能更好地去实现 JavaScript 的逆向。</p>
                <p>本节代码：<a href="https://github.com/Python3WebSpider/JavaScriptObfuscate" target="_blank" rel="noopener">https://github.com/Python3WebSpider/JavaScriptObfuscate</a>。</p>
                <p>由于本节涉及一些专业名词，部分内容参考来源如下：</p>
                <ul>
                  <li>GitHub - javascript-obfuscator 官方 GitHub 仓库：<a href="https://github.com/javascript-obfuscator/javascript-obfuscator" target="_blank" rel="noopener">https://github.com/javascript-obfuscator/javascript-obfuscator</a></li>
                  <li>官网 - javascript-obfuscator 官网：<a href="https://obfuscator.io/" target="_blank" rel="noopener">https://obfuscator.io/</a></li>
                  <li>博客 - asm.js 和 Emscripten 入门教程：<a href="https://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html" target="_blank" rel="noopener">https://www.ruanyifeng.com/blog/2017/09/asmjs_emscripten.html</a></li>
                  <li>博客 - JavaScript 混淆安全加固：<a href="https://juejin.im/post/5cfcb9d25188257e853fa71c" target="_blank" rel="noopener">https://juejin.im/post/5cfcb9d25188257e853fa71c</a></li>
                </ul>
              </div>
              <div class="popular-posts-header">相关文章</div>
              <ul class="popular-posts">
                <li class="popular-posts-item">
                  <div class="popular-posts-title"><a href="/2022113.html" rel="bookmark">【2022 年】Python3 爬虫教程 - JavaScript Hook 的用法</a></div>
                </li>
                <li class="popular-posts-item">
                  <div class="popular-posts-title"><a href="/2022112.html" rel="bookmark">【2022 年】Python3 爬虫教程 - JavaScript 逆向调试常用技巧</a></div>
                </li>
                <li class="popular-posts-item">
                  <div class="popular-posts-title"><a href="/2022114.html" rel="bookmark">【2022 年】Python3 爬虫教程 - Python 模拟执行 JavaScript</a></div>
                </li>
                <li class="popular-posts-item">
                  <div class="popular-posts-title"><a href="/2022104.html" rel="bookmark">【2022 年】Python3 爬虫教程 - ADSL 拨号代理的使用</a></div>
                </li>
                <li class="popular-posts-item">
                  <div class="popular-posts-title"><a href="/202291.html" rel="bookmark">【2022 年】Python3 爬虫教程 - OCR 识别图形验证码</a></div>
                </li>
              </ul>
              <div class="reward-container">
                <div></div>
                <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';"> 打赏 </button>
                <div id="qr" style="display: none;">
                  <div style="display: inline-block;">
                    <img src="/images/wechatpay.jpg" alt="崔庆才 微信支付">
                    <p>微信支付</p>
                  </div>
                  <div style="display: inline-block;">
                    <img src="/images/alipay.jpg" alt="崔庆才 支付宝">
                    <p>支付宝</p>
                  </div>
                </div>
              </div>
              <footer class="post-footer">
                <div class="post-tags">
                  <a href="/tags/%E7%88%AC%E8%99%AB/" rel="tag"><i class="fa fa-tag"></i> 爬虫</a>
                  <a href="/tags/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/" rel="tag"><i class="fa fa-tag"></i> 网络爬虫</a>
                  <a href="/tags/2022/" rel="tag"><i class="fa fa-tag"></i> 2022</a>
                  <a href="/tags/Python-%E7%88%AC%E8%99%AB/" rel="tag"><i class="fa fa-tag"></i> Python 爬虫</a>
                  <a href="/tags/JavaScript/" rel="tag"><i class="fa fa-tag"></i> JavaScript</a>
                  <a href="/tags/%E6%B7%B7%E6%B7%86/" rel="tag"><i class="fa fa-tag"></i> 混淆</a>
                </div>
                <div class="post-nav">
                  <div class="post-nav-item">
                    <a href="/2022112.html" rel="prev" title="【2022 年】Python3 爬虫教程 - JavaScript 逆向调试常用技巧">
                      <i class="fa fa-chevron-left"></i> 【2022 年】Python3 爬虫教程 - JavaScript 逆向调试常用技巧 </a>
                  </div>
                  <div class="post-nav-item">
                    <a href="/2022113.html" rel="next" title="【2022 年】Python3 爬虫教程 - JavaScript Hook 的用法"> 【2022 年】Python3 爬虫教程 - JavaScript Hook 的用法 <i class="fa fa-chevron-right"></i>
                    </a>
                  </div>
                </div>
              </footer>
            </article>
          </div>
          <div class="comments" id="gitalk-container"></div>
          <script>
            window.addEventListener('tabs:register', () =>
            {
              let
              {
                activeClass
              } = CONFIG.comments;
              if (CONFIG.comments.storage)
              {
                activeClass = localStorage.getItem('comments_active') || activeClass;
              }
              if (activeClass)
              {
                let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
                if (activeTab)
                {
                  activeTab.click();
                }
              }
            });
            if (CONFIG.comments.storage)
            {
              window.addEventListener('tabs:click', event =>
              {
                if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
                let commentClass = event.target.classList[1];
                localStorage.setItem('comments_active', commentClass);
              });
            }

          </script>
        </div>
        <div class="toggle sidebar-toggle">
          <span class="toggle-line toggle-line-first"></span>
          <span class="toggle-line toggle-line-middle"></span>
          <span class="toggle-line toggle-line-last"></span>
        </div>
        <aside class="sidebar">
          <div class="sidebar-inner">
            <ul class="sidebar-nav motion-element">
              <li class="sidebar-nav-toc"> 文章目录 </li>
              <li class="sidebar-nav-overview"> 站点概览 </li>
            </ul>
            <!--noindex-->
            <div class="post-toc-wrap sidebar-panel">
              <div class="post-toc motion-element">
                <ol class="nav">
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#1-引入"><span class="nav-number">1.</span> <span class="nav-text">1. 引入</span></a></li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#2-网站数据防护方案"><span class="nav-number">2.</span> <span class="nav-text">2. 网站数据防护方案</span></a>
                    <ol class="nav-child">
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#URL-API-参数加密"><span class="nav-number">2.1.</span> <span class="nav-text">URL&#x2F;API 参数加密</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript-压缩、混淆和加密"><span class="nav-number">2.2.</span> <span class="nav-text">JavaScript 压缩、混淆和加密</span></a></li>
                    </ol>
                  </li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#3-URL-API-参数加密"><span class="nav-number">3.</span> <span class="nav-text">3. URL&#x2F;API 参数加密</span></a></li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#4-JavaScript-压缩"><span class="nav-number">4.</span> <span class="nav-text">4. JavaScript 压缩</span></a></li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#5-JavaScript-混淆"><span class="nav-number">5.</span> <span class="nav-text">5. JavaScript 混淆</span></a>
                    <ol class="nav-child">
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#代码压缩"><span class="nav-number">5.1.</span> <span class="nav-text">代码压缩</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#变量名混淆"><span class="nav-number">5.2.</span> <span class="nav-text">变量名混淆</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#字符串混淆"><span class="nav-number">5.3.</span> <span class="nav-text">字符串混淆</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#代码自我保护"><span class="nav-number">5.4.</span> <span class="nav-text">代码自我保护</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#控制流平坦化"><span class="nav-number">5.5.</span> <span class="nav-text">控制流平坦化</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#无用代码注入"><span class="nav-number">5.6.</span> <span class="nav-text">无用代码注入</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#对象键名替换"><span class="nav-number">5.7.</span> <span class="nav-text">对象键名替换</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#禁用控制台输出"><span class="nav-number">5.8.</span> <span class="nav-text">禁用控制台输出</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#调试保护"><span class="nav-number">5.9.</span> <span class="nav-text">调试保护</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#域名锁定"><span class="nav-number">5.10.</span> <span class="nav-text">域名锁定</span></a></li>
                      <li class="nav-item nav-level-3"><a class="nav-link" href="#特殊编码"><span class="nav-number">5.11.</span> <span class="nav-text">特殊编码</span></a></li>
                    </ol>
                  </li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#6-WebAssembly"><span class="nav-number">6.</span> <span class="nav-text">6. WebAssembly</span></a></li>
                  <li class="nav-item nav-level-2"><a class="nav-link" href="#7-总结"><span class="nav-number">7.</span> <span class="nav-text">7. 总结</span></a></li>
                </ol>
              </div>
            </div>
            <!--/noindex-->
            <div class="site-overview-wrap sidebar-panel">
              <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <img class="site-author-image" itemprop="image" alt="崔庆才" src="/images/avatar.png">
                <p class="site-author-name" itemprop="name">崔庆才</p>
                <div class="site-description" itemprop="description">静觅丨崔庆才的个人站点专业为您提供爬虫教程,爬虫,Python,Python爬虫,Python爬虫教程,爬虫书的相关信息，想要了解更多详情，请联系我们。</div>
              </div>
              <div class="site-state-wrap motion-element">
                <nav class="site-state">
                  <div class="site-state-item site-state-posts">
                    <a href="/archives/">
                      <span class="site-state-item-count">685</span>
                      <span class="site-state-item-name">日志</span>
                    </a>
                  </div>
                  <div class="site-state-item site-state-categories">
                    <a href="/categories/">
                      <span class="site-state-item-count">32</span>
                      <span class="site-state-item-name">分类</span></a>
                  </div>
                  <div class="site-state-item site-state-tags">
                    <a href="/tags/">
                      <span class="site-state-item-count">246</span>
                      <span class="site-state-item-name">标签</span></a>
                  </div>
                </nav>
              </div>
              <div class="links-of-author motion-element">
                <span class="links-of-author-item">
                  <a href="https://github.com/Germey" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Germey" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
                </span>
                <span class="links-of-author-item">
                  <a href="mailto:cqc@cuiqingcai.com.com" title="邮件 → mailto:cqc@cuiqingcai.com.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>邮件</a>
                </span>
                <span class="links-of-author-item">
                  <a href="https://weibo.com/cuiqingcai" title="微博 → https:&#x2F;&#x2F;weibo.com&#x2F;cuiqingcai" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i>微博</a>
                </span>
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/Germey" title="知乎 → https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;Germey" rel="noopener" target="_blank"><i class="fa fa-magic fa-fw"></i>知乎</a>
                </span>
              </div>
            </div>
            <div style=" width: 100%;" class="sidebar-panel sidebar-panel-image sidebar-panel-active">
              <a href="https://item.jd.com/13527222.html" target="_blank" rel="noopener">
                <img src="https://cdn.cuiqingcai.com/ei5og.jpg" style=" width: 100%;">
              </a>
            </div>
            <div class="sidebar-panel sidebar-panel-categories sidebar-panel-active">
              <h4 class="name"> 分类 </h4>
              <div class="content">
                <ul class="category-list">
                  <li class="category-list-item"><a class="category-list-link" href="/categories/API/">API</a><span class="category-list-count">5</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C/C++</a><span class="category-list-count">23</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/HTML/">HTML</a><span class="category-list-count">14</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">5</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">26</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">14</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Luma/">Luma</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">2</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Net/">Net</a><span class="category-list-count">4</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Nexior/">Nexior</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a><span class="category-list-count">40</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">27</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Paper/">Paper</a><span class="category-list-count">2</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">303</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/TypeScript/">TypeScript</a><span class="category-list-count">2</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E5%B1%95%E7%A4%BA/">个人展示</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E6%97%A5%E8%AE%B0/">个人日记</a><span class="category-list-count">9</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E8%AE%B0%E5%BD%95/">个人记录</a><span class="category-list-count">6</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%B8%AA%E4%BA%BA%E9%9A%8F%E7%AC%94/">个人随笔</a><span class="category-list-count">21</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a><span class="category-list-count">5</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/">安装配置</a><span class="category-list-count">59</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/">技术杂谈</a><span class="category-list-count">96</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%AA%E5%88%86%E7%B1%BB/">未分类</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><span class="category-list-count">4</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB%E7%AC%94%E8%AE%B0/">生活笔记</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A6%8F%E5%88%A9%E4%B8%93%E5%8C%BA/">福利专区</a><span class="category-list-count">6</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E8%81%8C%E4%BD%8D%E6%8E%A8%E8%8D%90/">职位推荐</a><span class="category-list-count">1</span></li>
                  <li class="category-list-item"><a class="category-list-link" href="/categories/%E8%89%BA%E6%9C%AF%E4%BA%8C%E7%BB%B4%E7%A0%81/">艺术二维码</a><span class="category-list-count">1</span></li>
                </ul>
              </div>
            </div>
            <div class="sidebar-panel sidebar-panel-friends sidebar-panel-active">
              <h4 class="name"> 友情链接 </h4>
              <ul class="friends">
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/j2dub.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.findhao.net/" target="_blank" rel="noopener">FindHao</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/6apxu.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.51dev.com/" target="_blank" rel="noopener">IT技术社区</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/bqlbs.png">
                  </span>
                  <span class="link">
                    <a href="http://www.urselect.com/" target="_blank" rel="noopener">优社电商</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/8s88c.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.yuanrenxue.com/" target="_blank" rel="noopener">猿人学</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/2wgg5.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.yunlifang.cn/" target="_blank" rel="noopener">云立方</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="http://qianxunclub.com/favicon.png">
                  </span>
                  <span class="link">
                    <a href="http://qianxunclub.com/" target="_blank" rel="noopener">千寻啊千寻</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/0044u.jpg">
                  </span>
                  <span class="link">
                    <a href="http://kodcloud.com/" target="_blank" rel="noopener">可道云</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/ygnpn.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.kunkundashen.cn/" target="_blank" rel="noopener">坤坤大神</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/x714o.jpg">
                  </span>
                  <span class="link">
                    <a href="http://www.hubwiz.com/" target="_blank" rel="noopener">汇智网</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/44hxf.png">
                  </span>
                  <span class="link">
                    <a href="http://redstonewill.com/" target="_blank" rel="noopener">红色石头</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/wkaus.jpg">
                  </span>
                  <span class="link">
                    <a href="https://zhaoshuai.me/" target="_blank" rel="noopener">碎念</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/pgo0r.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.chenwenguan.com/" target="_blank" rel="noopener">陈文管的博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/kk82a.jpg">
                  </span>
                  <span class="link">
                    <a href="https://www.lxlinux.net/" target="_blank" rel="noopener">良许Linux教程网</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/lj0t2.jpg">
                  </span>
                  <span class="link">
                    <a href="https://tanqingbo.cn/" target="_blank" rel="noopener">IT码农</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/i8cdr.png">
                  </span>
                  <span class="link">
                    <a href="https://junyiseo.com/" target="_blank" rel="noopener">均益个人博客</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://cdn.cuiqingcai.com/chwv2.png">
                  </span>
                  <span class="link">
                    <a href="https://brucedone.com/" target="_blank" rel="noopener">大鱼的鱼塘</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://www.91vps.com/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="http://www.91vps.com/" target="_blank" rel="noopener">91VPS</a>
                  </span>
                </li>
                <li class="friend">
                  <span class="logo">
                    <img src="https://webpage.qidian.qq.com/qidian/chatv3-gray/favicon.ico">
                  </span>
                  <span class="link">
                    <a href="https://www.qg.net/" target="_blank" rel="noopener">青果网络</a>
                  </span>
                </li>
              </ul>
            </div>
            <div class="sidebar-panel sidebar-panel-tags sidebar-panel-active">
              <h4 class="name"> 标签云 </h4>
              <div class="content">
                <a href="/tags/2022/" style="font-size: 20px;">2022</a> <a href="/tags/2048/" style="font-size: 10px;">2048</a> <a href="/tags/ADSL/" style="font-size: 10px;">ADSL</a> <a href="/tags/API/" style="font-size: 16px;">API</a> <a href="/tags/Ajax/" style="font-size: 12px;">Ajax</a> <a href="/tags/Bootstrap/" style="font-size: 11px;">Bootstrap</a> <a href="/tags/Bug/" style="font-size: 10px;">Bug</a> <a href="/tags/CDN/" style="font-size: 10px;">CDN</a> <a href="/tags/CQC/" style="font-size: 10px;">CQC</a> <a href="/tags/CSS/" style="font-size: 10px;">CSS</a> <a href="/tags/CSS-%E5%8F%8D%E7%88%AC%E8%99%AB/" style="font-size: 10px;">CSS 反爬虫</a> <a href="/tags/CV/" style="font-size: 10px;">CV</a> <a href="/tags/ChatGPT/" style="font-size: 10px;">ChatGPT</a> <a href="/tags/Cookie/" style="font-size: 10px;">Cookie</a> <a href="/tags/Django/" style="font-size: 10px;">Django</a> <a href="/tags/Eclipse/" style="font-size: 11px;">Eclipse</a> <a href="/tags/Elasticsearch/" style="font-size: 10px;">Elasticsearch</a> <a href="/tags/FTP/" style="font-size: 10px;">FTP</a> <a href="/tags/Flux/" style="font-size: 10px;">Flux</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub/" style="font-size: 13px;">GitHub</a> <a href="/tags/HTML5/" style="font-size: 10px;">HTML5</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Hailuo/" style="font-size: 10px;">Hailuo</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Hook/" style="font-size: 10px;">Hook</a> <a href="/tags/IP/" style="font-size: 10px;">IP</a> <a href="/tags/IT/" style="font-size: 10px;">IT</a> <a href="/tags/JSON/" style="font-size: 10px;">JSON</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/JavaScript/" style="font-size: 14px;">JavaScript</a> <a href="/tags/K8s/" style="font-size: 10px;">K8s</a> <a href="/tags/LOGO/" style="font-size: 10px;">LOGO</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Luma/" style="font-size: 10px;">Luma</a> <a href="/tags/MIUI/" style="font-size: 10px;">MIUI</a> <a href="/tags/Markdown/" style="font-size: 10px;">Markdown</a> <a href="/tags/Midjourney/" style="font-size: 11px;">Midjourney</a> <a href="/tags/MongoDB/" style="font-size: 11px;">MongoDB</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/Mysql/" style="font-size: 10px;">Mysql</a> <a href="/tags/NBA/" style="font-size: 10px;">NBA</a> <a href="/tags/Nexior/" style="font-size: 10px;">Nexior</a> <a href="/tags/OCR/" style="font-size: 10px;">OCR</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/PHP/" style="font-size: 11px;">PHP</a> <a href="/tags/PPT/" style="font-size: 10px;">PPT</a> <a href="/tags/PS/" style="font-size: 10px;">PS</a> <a href="/tags/Pathlib/" style="font-size: 10px;">Pathlib</a> <a href="/tags/PhantomJS/" style="font-size: 10px;">PhantomJS</a> <a href="/tags/Playwright/" style="font-size: 10px;">Playwright</a> <a href="/tags/Python/" style="font-size: 17px;">Python</a> <a href="/tags/Python-%E7%88%AC%E8%99%AB/" style="font-size: 18px;">Python 爬虫</a> <a href="/tags/Python3/" style="font-size: 11px;">Python3</a> <a href="/tags/Python3%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/" style="font-size: 12px;">Python3爬虫教程</a> <a href="/tags/Pythonic/" style="font-size: 10px;">Pythonic</a> <a href="/tags/Python%E7%88%AC%E8%99%AB/" style="font-size: 19px;">Python爬虫</a> <a href="/tags/Python%E7%88%AC%E8%99%AB%E4%B9%A6/" style="font-size: 12px;">Python爬虫书</a> <a href="/tags/Python%E7%88%AC%E8%99%AB%E6%95%99%E7%A8%8B/" style="font-size: 15px;">Python爬虫教程</a> <a href="/tags/QQ/" style="font-size: 10px;">QQ</a> <a href="/tags/RabbitMQ/" style="font-size: 10px;">RabbitMQ</a> <a href="/tags/ReCAPTCHA/" style="font-size: 10px;">ReCAPTCHA</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Riffusion/" style="font-size: 10px;">Riffusion</a> <a href="/tags/SAE/" style="font-size: 10px;">SAE</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/SVG/" style="font-size: 10px;">SVG</a> <a href="/tags/Scrapy-redis/" style="font-size: 10px;">Scrapy-redis</a> <a href="/tags/Scrapy%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 10px;">Scrapy分布式</a> <a href="/tags/Selenium/" style="font-size: 11px;">Selenium</a> <a href="/tags/Session/" style="font-size: 10px;">Session</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/Suno/" style="font-size: 10px;">Suno</a> <a href="/tags/TKE/" style="font-size: 10px;">TKE</a> <a href="/tags/TXT/" style="font-size: 10px;">TXT</a> <a href="/tags/Terminal/" style="font-size: 10px;">Terminal</a> <a href="/tags/Ubuntu/" style="font-size: 11px;">Ubuntu</a> <a href="/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/tags/Veo/" style="font-size: 10px;">Veo</a> <a href="/tags/Vercel/" style="font-size: 10px;">Vercel</a> <a href="/tags/Vs-Code/" style="font-size: 10px;">Vs Code</a> <a href="/tags/Vue/" style="font-size: 11px;">Vue</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Web%E7%BD%91%E9%A1%B5/" style="font-size: 10px;">Web网页</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/Winpcap/" style="font-size: 10px;">Winpcap</a> <a href="/tags/WordPress/" style="font-size: 13px;">WordPress</a> <a href="/tags/XPath/" style="font-size: 12px;">XPath</a> <a href="/tags/Youtube/" style="font-size: 11px;">Youtube</a> <a href="/tags/acedata/" style="font-size: 12px;">acedata</a> <a href="/tags/aiohttp/" style="font-size: 10px;">aiohttp</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/api/" style="font-size: 13px;">api</a> <a href="/tags/chatgpt/" style="font-size: 10px;">chatgpt</a> <a href="/tags/cocos2d-x/" style="font-size: 10px;">cocos2d-x</a> <a href="/tags/dummy-change/" style="font-size: 10px;">dummy change</a> <a href="/tags/e6/" style="font-size: 10px;">e6</a> <a href="/tags/fitvids/" style="font-size: 10px;">fitvids</a>
              </div>
              <script>
                const tagsColors = ['#00a67c', '#5cb85c', '#d9534f', '#567e95', '#b37333', '#f4843d', '#15a287']
                const tagsElements = document.querySelectorAll('.sidebar-panel-tags .content a')
                tagsElements.forEach((item) =>
                {
                  item.style.backgroundColor = tagsColors[Math.floor(Math.random() * tagsColors.length)]
                })

              </script>
            </div>
          </div>
        </aside>
        <div id="sidebar-dimmer"></div>
      </div>
    </main>
    <footer class="footer">
      <div class="footer-inner">
        <div class="copyright">
          <span class="author" itemprop="copyrightHolder">崔庆才丨静觅</span> &copy; <span itemprop="copyrightYear">2025</span>
          <span class="with-love">
            <i class="fa fa-heart"></i>
          </span>
          <a href="https://cuiqingcai.com/sitemap.xml" style="display:none" title="爬虫教程" target="_blank"><strong>爬虫教程</strong></a>
          <a href="https://cuiqingcai.com/sitemap.html" style="display:none" title="爬虫教程" target="_blank"><strong>爬虫教程</strong></a>
          <span class="post-meta-divider">|</span>
          <span class="post-meta-item-icon">
            <i class="fa fa-chart-area"></i>
          </span>
          <span title="站点总字数">3.3m</span>
          <span class="post-meta-divider">|</span>
          <span class="post-meta-item-icon">
            <i class="fa fa-coffee"></i>
          </span>
          <span title="站点阅读时长">49:35</span>
        </div>
        <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动 </div>
        <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">京ICP备18015597号-1 </a>
        </div>
        <script>
          (function ()
          {
            function leancloudSelector(url)
            {
              url = encodeURI(url);
              return document.getElementById(url).querySelector('.leancloud-visitors-count');
            }

            function addCount(Counter)
            {
              var visitors = document.querySelector('.leancloud_visitors');
              var url = decodeURI(visitors.id);
              var title = visitors.dataset.flagTitle;
              Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify(
              {
                url
              }))).then(response => response.json()).then((
              {
                results
              }) =>
              {
                if (results.length > 0)
                {
                  var counter = results[0];
                  leancloudSelector(url).innerText = counter.time + 1;
                  Counter('put', '/classes/Counter/' + counter.objectId,
                  {
                    time:
                    {
                      '__op': 'Increment',
                      'amount': 1
                    }
                  }).catch(error =>
                  {
                    console.error('Failed to save visitor count', error);
                  });
                }
                else
                {
                  Counter('post', '/classes/Counter',
                  {
                    title,
                    url,
                    time: 1
                  }).then(response => response.json()).then(() =>
                  {
                    leancloudSelector(url).innerText = 1;
                  }).catch(error =>
                  {
                    console.error('Failed to create', error);
                  });
                }
              }).catch(error =>
              {
                console.error('LeanCloud Counter Error', error);
              });
            }

            function showTime(Counter)
            {
              var visitors = document.querySelectorAll('.leancloud_visitors');
              var entries = [...visitors].map(element =>
              {
                return decodeURI(element.id);
              });
              Counter('get', '/classes/Counter?where=' + encodeURIComponent(JSON.stringify(
              {
                url:
                {
                  '$in': entries
                }
              }))).then(response => response.json()).then((
              {
                results
              }) =>
              {
                for (let url of entries)
                {
                  let target = results.find(item => item.url === url);
                  leancloudSelector(url).innerText = target ? target.time : 0;
                }
              }).catch(error =>
              {
                console.error('LeanCloud Counter Error', error);
              });
            }
            let
            {
              app_id,
              app_key,
              server_url
            } = {
              "enable": true,
              "app_id": "6X5dRQ0pnPWJgYy8SXOg0uID-gzGzoHsz",
              "app_key": "ziLDVEy73ne5HtFTiGstzHMS",
              "server_url": "https://6x5drq0p.lc-cn-n1-shared.com",
              "security": false
            };

            function fetchData(api_server)
            {
              var Counter = (method, url, data) =>
              {
                return fetch(`${api_server}/1.1${url}`,
                {
                  method,
                  headers:
                  {
                    'X-LC-Id': app_id,
                    'X-LC-Key': app_key,
                    'Content-Type': 'application/json',
                  },
                  body: JSON.stringify(data)
                });
              };
              if (CONFIG.page.isPost)
              {
                if (CONFIG.hostname !== location.hostname) return;
                addCount(Counter);
              }
              else if (document.querySelectorAll('.post-title-link').length >= 1)
              {
                showTime(Counter);
              }
            }
            let api_server = app_id.slice(-9) !== '-MdYXbMMI' ? server_url : `https://${app_id.slice(0, 8).toLowerCase()}.api.lncldglobal.com`;
            if (api_server)
            {
              fetchData(api_server);
            }
            else
            {
              fetch('https://app-router.leancloud.cn/2/route?appId=' + app_id).then(response => response.json()).then((
              {
                api_server
              }) =>
              {
                fetchData('https://' + api_server);
              });
            }
          })();

        </script>
      </div>
      <div class="footer-stat">
        <span id="cnzz_stat_icon_1279355174"></span>
        <script type="text/javascript">
          document.write(unescape("%3Cspan id='cnzz_stat_icon_1279355174'%3E%3C/span%3E%3Cscript src='https://v1.cnzz.com/z_stat.php%3Fid%3D1279355174%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));

        </script>
      </div>
    </footer>
  </div>
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/js/utils.js"></script>
  <script src="/.js"></script>
  <script src="/js/schemes/pisces.js"></script>
  <script src="/.js"></script>
  <script src="/js/next-boot.js"></script>
  <script src="/.js"></script>
  <script>
    (function ()
    {
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x = document.getElementsByTagName("link");
      //Find the last canonical URL
      if (x.length > 0)
      {
        for (i = 0; i < x.length; i++)
        {
          if (x[i].rel.toLowerCase() == 'canonical' && x[i].href)
          {
            canonicalURL = x[i].href;
          }
        }
      }
      //Get protocol
      if (!canonicalURL)
      {
        curProtocol = window.location.protocol.split(':')[0];
      }
      else
      {
        curProtocol = canonicalURL.split(':')[0];
      }
      //Get current URL if the canonical URL does not exist
      if (!canonicalURL) canonicalURL = window.location.href;
      //Assign script content. Replace current URL with the canonical URL
      ! function ()
      {
        var e = /([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,
          r = canonicalURL,
          t = document.referrer;
        if (!e.test(r))
        {
          var n = (String(curProtocol).toLowerCase() === 'https') ? "https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif" : "//api.share.baidu.com/s.gif";
          t ? (n += "?r=" + encodeURIComponent(document.referrer), r && (n += "&l=" + r)) : r && (n += "?l=" + r);
          var i = new Image;
          i.src = n
        }
      }(window);
    })();

  </script>
  <script src="/js/local-search.js"></script>
  <script src="/.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css">
  <script>
    NexT.utils.loadComments(document.querySelector('#gitalk-container'), () =>
    {
      NexT.utils.getScript('//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js', () =>
      {
        var gitalk = new Gitalk(
        {
          perPage: : 100,
          clientID: '4c86ce1d7c4fbb3b277c',
          clientSecret: '4927beb0f90e2c07e66c99d9d2529cf3eb8ac8e4',
          repo: 'Blog',
          owner: 'germey',
          admin: ['germey'],
          id: '5f1d72304b310dcff2c0cb92eb9f1288',
          language: 'zh-CN',
          distractionFreeMode: true
        });
        gitalk.render('gitalk-container');
      }, window.Gitalk);
    });

  </script>
</body>

</html>
